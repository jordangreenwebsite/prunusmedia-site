(()=>{"use strict";var t={45335:(t,e,a)=>{a.d(e,{Fg:()=>_,LX:()=>o,Wh:()=>m,rn:()=>v});var s=a(27361),i=a.n(s),n=a(85450),l=(a(74959),a(88506),a(31381),a(23128));function o(t,e=[]){const a=n.PK.element(t.data.type);if(a.settings&&a.settings.disableAI)return e;let s=[...e,...r(a.controls.contentSections,"content",t)];return t.children.forEach((t=>{s=o(t,s)})),s}function r(t,e,a,s=[]){const l=n.PK.element(a.data.type),o=s;return t.forEach((t=>{const s=`${e}.${t.slug}`;c(t)&&!d(t,e,a)&&o.push({nodeId:a.id,controlPath:s,nodeName:l.name,field:{description:p(t,s,a.data.type),label:t.label,value:i()(a.data.properties,s),type:t.options.type,locked:v(a,s)}}),"repeater"!==t.options.type&&r(t.children,s,a,o)})),o}function d(t,e,a){const s=`${e}.${t.slug}`,n=i()(a.data.properties,s,"");return""===n||null===n||void 0===n}function c(t){return["text","richtext","repeater"].includes(t.options.type)}function p(t,e,a){const s=n.PK.element(a).name;if("repeater"===t.options.type){const e=t.children.filter(c).map((t=>t.slug)),a=e.join(", ");return`${s} - An array of objects with the following keys: ${a}.`}return e.endsWith("button.text")?`${s} - Button`:s===t.label?s:`${s} - ${t.label}`}function u(t){return t.data?.properties?.meta?.promptInfo}function m(t){const e=u(t)?.temperature;return void 0!==e?e:1}function g(t,e){const a=n.PK.element(t.data.type).name,s=u(t)?.lockedFields||[],i=(0,l.Z)(s);i.includes(e)||i.push(e),n.Hb.unthrottledPropertyChanged({elementId:t.id,path:"meta.promptInfo.lockedFields",meta:{snapshotLabel:`Locked field "${e}" for element "${a}"`},value:i})}function h(t,e){const a=n.PK.element(t.data.type).name,s=u(t)?.lockedFields||[],i=(0,l.Z)(s),o=i.indexOf(e);o>-1&&i.splice(o,1),n.Hb.unthrottledPropertyChanged({elementId:t.id,path:"meta.promptInfo.lockedFields",meta:{snapshotLabel:`Unlocked field "${e}" for element "${a}"`},value:i})}function _(t,e){v(t,e)?h(t,e):g(t,e)}function v(t,e){const a=u(t)?.lockedFields||[];return a.includes(e)}},76491:(t,e,a)=>{a.d(e,{I8:()=>_,Tk:()=>u,ho:()=>m,m3:()=>g,y8:()=>h});var s=a(45974),i=a(32521),n=a(98851),l=a(96628),o=a(65669),r=a(88506),d=a(30902),c=a(85450),p=a(69137);a(19528);async function u(t,e="json"){return(0,n.D)({action:"breakdance_ai_request_completion",friendlyName:"AI Assistant",dataToPost:{messages:(0,o.J)(t),format:e},decoder:i.Z_,resultKey:"data"})}async function m(t,e="json",a){await(0,n.D)({action:"breakdance_ai_persist_messages",friendlyName:"AI Assistant - Persist Messages",dataToPost:{messages:(0,o.J)(t),format:e,temperature:a},decoder:i.dt({status:i.i0("ok")})})}function g(){const t=window.Breakdance.restUrl+"/ai/stream-completion?_wpnonce="+window.Breakdance.restNonce;return new EventSource(t)}function h(t){const e=(0,d.pipe)(t,r.Z,(0,s.fold)((()=>{}),(t=>t))),a=e?.choices[0].delta.content;return null!==a&&void 0!==a?a:""}async function _(){const t=await(0,n.D)({action:"breakdance_ai_get_settings",decoder:l.YF,resultKey:"data",suppressErrorLogging:!0});return(0,d.pipe)(t,(0,s.fold)((()=>!1),(t=>(p.n.ignore((()=>{c.cr.setAiSettings(t),c.cr.markCurrentAiSettingsAsUntouched()})),!0))))}},74959:(t,e,a)=>{a.d(e,{wX:()=>s});a(65669);function s(t,e){const a=[{name:"Business Name",value:t.businessName??"Bizcorp"},{name:"Business Description",value:t.businessDescription??"Bizcorp provides products and services."},{name:"Section Description",value:e?.sectionDescription??""},{name:"Qualifiers",value:e?.qualifiers??t.qualifiers??""}];return a.reduce(((t,e)=>e.value?`${t}\n${e.name}: ${e.value}`:t),"")}new Intl.PluralRules("en",{type:"ordinal"})},96628:(t,e,a)=>{a.d(e,{YF:()=>l});var s=a(32521);const i=s.r$({icon:s.Z_,name:s.Z_,prompt:s.Z_}),n=s.dt({businessName:s.G0([s.Z_,s.lB]),businessDescription:s.G0([s.Z_,s.lB]),qualifiers:s.G0([s.Z_,s.lB]),presets:s.IX(i)}),l=s.dt({isApiKeySet:s.O7,isStreamingEnabled:s.O7,model:s.Z_,prompt:n});s.dt({id:s.Z_,alt_description:s.G0([s.Z_,s.lB]),description:s.G0([s.Z_,s.lB]),urls:s.r$({raw:s.Z_,full:s.Z_,regular:s.Z_,small:s.Z_,thumb:s.Z_})}),s.dt({error:s.dt({message:s.Z_,type:s.Z_,param:s.G0([s.Z_,s.lB]),code:s.Z_})})},5502:(t,e,a)=>{function s(t){return"object"===typeof t&&null!==t&&!Array.isArray(t)}a.d(e,{S:()=>s})},92106:(t,e,a)=>{a.d(e,{ij:()=>m,l9:()=>p});a(27361),a(31381),a(85450);var s=a(45974),i=a(30902),n=(a(9950),a(69137),a(23128),a(65118)),l=(a(65669),a(84274),a(565),a(12721)),o=a(31737),r=a(31549),d=a(61979);a(98949);new l.hF;async function c(t){const{secure:e,permission:a}=await(0,o.fn)();return t&&!window.safari?"event":e?null===a||"denied"===a.state?"localstorage":"clipboard":"localstorage"}async function p(t){try{await navigator.clipboard.writeText(t),console.debug("Writing to clipboard")}catch(e){(0,o._G)(t),console.debug("Fallback: Writing to clipboard")}(0,r.r)("breakdance_clipboard",t)}async function u(t){const e=t?.clipboardData?.getData("text"),a=await c(t);return console.debug(`Reading clipboard from ${a}`),"event"===a?e:"localstorage"===a?(0,r.z)("breakdance_clipboard"):await navigator.clipboard.readText()}async function m(t){const e=await u(t);if(!e)return null;const a=(0,n.Z)(e,d.o);return(0,i.pipe)(a,(0,s.fold)((()=>null),(t=>t??null)))}},31737:(t,e,a)=>{async function s(){try{return await navigator.permissions.query({name:"clipboard-read",allowWithoutGesture:!1})}catch(t){return null}}async function i(){const t=await s();return{secure:window.isSecureContext,permission:t}}function n(t){const e=document.createElement("textarea");let a;e.value=t,e.style.top="0",e.style.left="0",e.style.position="fixed",e.classList.add("breakdance-offscreen-input"),document.body.appendChild(e),e.focus(),e.select();try{a=document.execCommand("copy")}catch(s){a=!1}return document.body.removeChild(e),a}a.d(e,{_G:()=>n,fn:()=>i})},98949:(t,e,a)=>{a(69137),a(9950),a(64940),a(565),a(31549)},25970:(t,e,a)=>{a(98851),a(85450),a(43195),a(31381),a(58172),a(47902),a(39664),a(85902),a(62231)},87615:(t,e,a)=>{a.d(e,{db:()=>l,v_:()=>o});var s=a(98851),i=a(9665),n=(a(31381),a(85450),a(23128),a(9950),a(39664),a(65669));a(565);async function l(){return await(0,s.D)({action:"breakdance_load_blocks",resultKey:"blocks",decoder:i.G})}async function o(t){return await(0,s.D)({friendlyName:"Saving Global Block to WordPress",action:"breakdance_save_global_block",dataToPost:{...t,tree:(0,n.J)(t.tree)},decoder:i.H,resultKey:"block"})}},1073:(t,e,a)=>{a.d(e,{T:()=>p});var s=a(98851),i=(a(75031),a(30902)),n=a(45974),l=a(51168),o=a(64940),r=a(32521),d=a(65669),c=a(69137);async function p(){return(0,i.pipe)(await(0,s.D)({friendlyName:"Saving global settings to WordPress",action:"breakdance_save_global_settings",dataToPost:{globalSettings:(0,d.J)(o.cr.globalSettings)},decoder:r._4}),(0,n.fold)((t=>((0,l.UE)(t),!1)),(()=>(c.n.ignore((()=>o.cr.markCurrentGlobalSettingsAsUntouched())),!0))))}},18759:(t,e,a)=>{a.d(e,{ln:()=>l,v:()=>n,y3:()=>o});var s=a(64940),i=a(23128);function n(t,e){const a=(0,i.Z)(s.kD.panelState);a.accordionState.globalSettings={...a.accordionState.globalSettings,[t]:e},s.kD.setPanelState(a)}function l(t,e){const a=(0,i.Z)(s.kD.panelState);a.accordionState.dynamicDataFieldAttributes={...a.accordionState.dynamicDataFieldAttributes,[t]:e},s.kD.setPanelState(a)}function o(t){return s.kD.panelState?.accordionState?.dynamicDataFieldAttributes[t]}},37982:(t,e,a)=>{a.d(e,{Fr:()=>_,y8:()=>m});a(21516);var s=a(98851),i=a(3735),n=a(48973),l=a(51168),o=a(64940),r=a(65669),d=a(32521),c=a(95690),p=a(69137),u=a(39664);function m(t){return/^-?[.]+[_a-zA-Z]+[_a-zA-Z0-9-]*$/.test(t)}function g(t){try{document.createDocumentFragment().querySelector(t)}catch{return!1}return!0}function h(t){if("class"===t.type){if(!m(t.name))return void u.Z.log.message(`${t.name} is not a valid CSS class name.`)}else if(!g(t.name))return void u.Z.log.message(`${t.name} is not a valid CSS selector.`);o.cr.cssSelectors.find((e=>e.name===t.name))?u.Z.log.message(`${t.name} is already present.`):p.n.transaction((()=>o.cr.setSelectors([...o.cr.cssSelectors,t])),"Add Selector")}function _(t){h(t),(0,c.O_)("selectors")||v()}async function v(){return(0,i.zG)(await(0,s.D)({friendlyName:"Saving selectors to WordPress",action:"breakdance_save_selectors",dataToPost:{selectors:(0,r.J)(o.cr.cssSelectors)},decoder:d._4}),(0,n.g_)((t=>((0,l.UE)(t),!1)),(()=>(p.n.ignore((()=>o.cr.markCurrentSelectorsAsUntouched())),!0))))}},13960:(t,e,a)=>{a.d(e,{$0:()=>i,LX:()=>n,V9:()=>l,dO:()=>r,qS:()=>o,ur:()=>d});var s=a(64940);function i(t,e){return e.proOnly?n(t):t}function n(t){return"free"===s.PK.subscriptionMode?`${t} [PRO]`:t}function l(t,e){return t&&e.length&&t.flat().find((t=>e.find((e=>e.slug===t.ruleSlug))))}function o(t,e){const a=e.filter((t=>t.proOnly));return t.find((t=>a.find((e=>e.value==t.slug))))}function r(t){return"free"===s.PK.subscriptionMode&&t.proOnly}function d(){return{backgroundColor:"var(--gray200)",label:"Pro",textColor:"var(--gray800)"}}},32127:(t,e,a)=>{a.d(e,{UH:()=>i});a(8400),a(98851),a(47245),a(85450),a(67505);var s=a(23128);a(69137),a(51168),a(25970),a(86592),a(13635),a(65669),a(89381),a(63842),a(39664),a(565),a(13503);function i(t){const e=new URL(window.Breakdance.originalUrl);return e.searchParams.set("id",`${t}`),e.search=e.searchParams.toString(),e.href}class n{setupHook(t){this.store=t,this.initialState=(0,s.Z)(this.store.state)}resetToInitialState(){const t=(0,s.Z)(this.initialState);this.store.replaceState(t)}}new n},85299:(t,e,a)=>{var s=a(20144),i=a(85450),n=a(49026),l=a(31096),o=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(l.Z,{staticClass:"breakdance-admin-wp"},[e("Notifications"),e("div",{staticClass:"manage-templates-app"},[t.isBlockPostType?[e("ManageGlobalBlocks")]:[e("ManageTemplates",{attrs:{postType:t.postType}})]],2)],1)},r=[],d=a(70655),c=a(14391),p=a(96326),u=a(37179),m=a(30144),g=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[t.isLoadingData?e("Loading"):t._e(),e("div",{staticClass:"manage-templates"},[e("div",{staticClass:"manage-templates__header"},[e("h1",{staticClass:"manage-templates__title"},[t._v(" "+t._s(t.showTrash?`Deleted ${t.templateName}s`:`${t.templateName}s`)+" ")]),t.showTrash?t._e():["breakdance_header"===t.postType||"breakdance_footer"===t.postType||"breakdance_popup"===t.postType?e(u.Z,{staticClass:"breakdance-wp-admin-templating-button",attrs:{elevation:"0",outlined:""},on:{click:function(e){t.modalData={type:"add",data:t.blankTemplateWithValidSettings}}}},["breakdance_header"===t.postType?e("span",[t._v("Add Header")]):t._e(),"breakdance_footer"===t.postType?e("span",[t._v("Add Footer")]):t._e(),"breakdance_popup"===t.postType?e("span",[t._v("Add Popup")]):t._e()]):t._e(),"breakdance_template"===t.postType?e("AddTemplateDropdown",{attrs:{templateName:t.templateName,isWooCommerceActive:t.isWooCommerceActive,templates:t.templatesByStatus},on:{input:t.saveTemplate,blankModal:function(e){return t.handleTemplateCardModal("add",t.blankTemplateWithValidSettings)},modalWithSettings:function(e){return t.handleTemplateCardModal("add",e)}}}):t._e()]],2),this.templatesByStatus.length>0||this.filteredTemplatesBySearch.length>0||t.trashLength>0||t.showTrash?e("div",{staticClass:"manage-templates__actions"},[t.showTrash?t._e():e("div",{staticClass:"manage-templates__search"},[e("SearchInput",{attrs:{placeholder:t.searchInputPlaceholder},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e("div",{staticClass:"manage-templates__secondary-actions"},[t.showTrash&&this.templatesByStatus.length?e(u.Z,{staticClass:"mr-4",attrs:{text:"",loading:t.emptyingTrash},on:{click:t.emptyTrash}},[e("Icon",{staticClass:"mr-2",attrs:{icon:"TrashIcon",size:"16"}}),t._v(" Empty Trash ")],1):t._e(),t.trashLength||t.showTrash?e(u.Z,{attrs:{text:""},on:{click:function(e){t.showTrash=!t.showTrash}}},[t.showTrash?[e("Icon",{staticClass:"mr-2",attrs:{icon:"ArrowLeftLongIcon",size:"16"}}),t._v(" Back ")]:[e("Icon",{staticClass:"mr-2",attrs:{icon:"TrashIcon",size:"16"}}),t._v(" Trash ("+t._s(t.trashLength)+") ")]],2):t._e()],1)]):t._e()]),e("EmptyState",{attrs:{value:t.emptyStateData}}),t.filteredTemplatesBySearch.length>0?e(m.Z,{staticClass:"manage-templates__table breakdance-table",class:t.newTemplateAdded?"added":""},[e("thead",[e("tr",[e("th",{attrs:{width:"35%"}},[t._v("Template")]),e("th",{attrs:{width:"25%"}},[t._v("Applies to")]),e("th",{attrs:{width:"15%"}},[t._v("Conditions")]),"breakdance_popup"===t.postType?e("th",{attrs:{width:"15%"}},[t._v("Triggers")]):t._e(),"breakdance_popup"!==t.postType?e("th",{attrs:{width:"15%"}},[t._v("Priority")]):t._e(),e("th",{attrs:{width:"10%"}},[t._v("Active")])])]),e("transition-group",{attrs:{tag:"tbody",name:"fade",mode:"in-out"}},t._l(t.filteredTemplatesBySearch,(function(a){return e("TemplateRow",{key:a.id,class:t.newTemplateAdded?"":"animation-disabled",attrs:{value:t.getTemplateWithValidSettings(a),templateTypeCategories:t.templatesManagementData.templateTypeCategories,templateParents:t.templateParentsWithoutTrashed},on:{input:t.handleTemplateCardModal,update:t.updateTemplate,duplicate:t.duplicateTemplate,trash:t.trashTemplate,delete:t.deleteTemplate,restore:t.restoreTemplate}})})),1)],1):t._e(),t.modalData?e("EditTemplateModal",{attrs:{value:t.modalData.data,templatesManagementData:t.templatesManagementData,postType:t.postType,templateParents:t.templateParentsWithoutTrashed,templates:t.templatesByStatus,mode:t.modalData.type,skipWarning:t.skipWarning,hasPermissionToManageFallbacks:t.hasPermissionToManageFallbacks},on:{input:function(e){return t.saveTemplate(e)},close:function(e){t.modalData=!1},skipWarning:function(e){t.skipWarning=e}}}):t._e()],1)},h=[],_=a(30902),v=a(99697),y=a(47902),b=a(32521),f=a(47245);const k=b.jV([b.dt({slug:b.Z_,label:b.Z_}),b.r$({defaultPriority:b.pk})]),T=(b.IX(b.dt({text:b.Z_,value:b.pk})),b.IX(b.dt({label:b.Z_,types:b.IX(k)}))),Z=b.r$({parentId:b.pk,type:b.Z_,ruleGroups:b.IX(v.ZQ),triggers:v.Gc,priority:b.pk,disabled:b.O7,fallback:b.O7,onlyShowOnce:b.O7,avoidMultiple:b.O7,limitPageLoad:b.G0([b.pk,b.lB]),limitSession:b.G0([b.pk,b.lB]),limitForever:b.G0([b.pk,b.lB])}),w=b.G0([b.i0("breakdance_template"),b.i0("breakdance_popup"),b.i0("breakdance_header"),b.i0("breakdance_footer"),b.i0("breakdance_block"),b.i0("breakdance_acf_block")]),C=b.dt({id:b.pk,title:b.Z_,editInBreakdanceLink:b.Z_,postType:w,status:b.G0([b.i0("publish"),b.i0("trash"),b.S1])}),I=b.jV([C,b.dt({settings:b.G0([Z,b.lB])})]),S=b.jV([C,b.dt({settings:Z})]),P=b.dt({text:b.Z_,value:b.Z_,proOnly:b.G0([b.S1,b.O7])}),B=b.dt({conditions:b.IX(v.dV),dynamicFields:b.IX(y.pG),templateTypeCategories:T,popupTriggers:b.G0([b.lB,b.IX(P)])}),x=b.dt({templates:b.IX(I),templatesManagementData:B,isWooCommerceActive:b.O7,environment:f.Pt});var D=a(45974),G=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("tr",[e("td",[e("div",{staticClass:"manage-templates__title-row"},["trash"===t.mode?e("span",{staticClass:"manage-templates__title-link"},[t._v(" "+t._s(t.value.title)+" "),e("span",{staticClass:"manage-templates__title-id"},[t._v("#"+t._s(t.value.id))])]):e("a",{staticClass:"manage-templates__title-link",attrs:{target:"_top",href:t.value.editInBreakdanceLink}},[t._v(" "+t._s(t.value.title)+" "),e("span",{staticClass:"manage-templates__title-id"},[t._v("#"+t._s(t.value.id))])])]),e("div",{staticClass:"manage-templates__row-actions"},["publish"===t.mode?e("a",{staticClass:"manage-templates__btn-action",attrs:{href:t.value.editInBreakdanceLink,target:"_top",title:"Edit in Breakdance"}},[t._v(" Edit in Breakdance ")]):t._e(),"publish"===t.mode?e("button",{staticClass:"manage-templates__btn-action",attrs:{title:"Settings"},on:{click:t.openEditTemplateModal}},[t._v(" Settings ")]):t._e(),"trash"===t.mode?e("button",{staticClass:"manage-templates__btn-action",attrs:{title:"Restore"},on:{click:t.restoreTemplate}},[t._v(" Restore ")]):t._e(),"publish"===t.mode?e("button",{staticClass:"manage-templates__btn-action",attrs:{title:"Duplicate"},on:{click:t.duplicateTemplate}},[t._v(" Duplicate ")]):t._e(),e("button",{staticClass:"manage-templates__btn-action is-danger",attrs:{title:"publish"===t.mode?"Trash":"Delete permanently"},on:{click:t.deleteTemplate}},[t._v(" "+t._s("publish"===t.mode?"Trash":"Delete permanently")+" ")])])]),e("td",{staticClass:"manage-template__applies-to"},[t.matchingQuickAddTemplate?[e("span",{staticClass:"d-block"},[t._v(t._s(t.matchingQuickAddTemplate.name))]),e("ElementBadge",{staticClass:"template-row-element-badge",attrs:{value:{backgroundColor:t.matchingQuickAddTemplate.backgroundColor,textColor:t.matchingQuickAddTemplate.textColor,label:t.matchingQuickAddTemplate.category}}})]:t.appliesToLabel?[t._v(t._s(t.appliesToLabel))]:t._e()],2),e("td",[t.value.settings.ruleGroups&&t.value.settings.ruleGroups.length?[e("ConditionsPreviewTooltip",{attrs:{value:t.value.settings.ruleGroups}})]:t._e()],2),"breakdance_popup"===t.value.postType?e("td",{staticClass:"manage-template__td_text"},[t._v(" "+t._s(t.triggerLabels(t.value.settings.triggers))+" ")]):t._e(),"breakdance_popup"!==t.value.postType?e("td",{staticClass:"manage-template__td_text"},[void 0!==t.value.settings.priority?[t._v(" "+t._s(t.value.settings.priority)+" ")]:t._e()],2):t._e(),e("td",{staticClass:"manage-template__td_text"},[[e("ToggleInput",{attrs:{value:!t.value.settings.disabled},on:{input:t.updateDisabled}})]],2)])},A=[],V=a(43432),$=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[[e(V.Z,{staticClass:"condition-preview-tooltip-element",attrs:{bottom:"",transition:"0"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("span",t._g(t._b({},"span",s,!1),a),[e("Icon",{attrs:{icon:"CodeBranchIcon",size:"18"}})],1)]}}])},[e("span",[e("div",{staticClass:"condition-preview-tooltip-contanier"},[t._l(t.value,(function(a,s){return[e("div",{staticClass:"condition-preview-tooltip"},[s>0?e("span",{staticClass:"condition-preview-or-separator"},[e("span",[t._v("OR")])]):t._e(),t._l(a,(function(t,a){return e("ConditionPreviewRule",{key:a,attrs:{rule:t,index:a}})}))],2)]}))],2)])])]],2)},L=[],M=a(23128),O=a(27844),X=a(85283);let F=class extends s.ZP{edit(t){this.$emit("input",(0,M.Z)(t))}};(0,d.gn)([(0,c.fI)()],F.prototype,"value",void 0),F=(0,d.gn)([(0,c.wA)({components:{ConditionPreviewRule:O.Z,Icon:X.Z}})],F);const E=F,N=E;var W=a(1001),U=(0,W.Z)(N,$,L,!1,null,null,null);const j=U.exports;var R=a(98851),q=a(9665),z=a(39664),K=a(65669);async function H(t){return await(0,R.D)({action:"breakdance_manage_templates_save",dataToPost:{id:t.id,title:t.title,postType:t.postType,settings:(0,K.J)(t.settings)},decoder:S,resultKey:"data",friendlyName:"Save template"})}async function J(t){return await(0,R.D)({action:"breakdance_manage_templates_duplicate",dataToPost:{originalId:t.id,title:t.title,postType:t.postType,settings:(0,K.J)(t.settings)},decoder:S,resultKey:"data",friendlyName:"Duplicate template"})}async function Q(t){return await(0,R.D)({action:"breakdance_manage_templates_load_data",dataToPost:{post_type:t},decoder:x,resultKey:"data",friendlyName:"Get templates data"})}async function Y(){return await(0,R.D)({action:"breakdance_manage_global_blocks",decoder:q.G,resultKey:"data",friendlyName:"Get global blocks data"})}async function tt(t,e,a){if(confirm(`${"publish"===a?"Moving to trash":"Permanently deleting"} "${t}". Are you sure?`))return(0,_.pipe)(await(0,R.D)({action:"breakdance_manage_templates_delete",dataToPost:{id:e,trashOrDelete:"trash"===a?"delete":"trash"},decoder:b.i0("success"),resultKey:"data",friendlyName:`Deleting "${t}"`}),(0,D.fold)((()=>{z.Z.log.message(`Failed to delete "${t}"`)}),(()=>e)))}async function et(t,e){if(confirm(`Restoring "${t}". Are you sure?`))return(0,_.pipe)(await(0,R.D)({action:"breakdance_manage_templates_restore",dataToPost:{id:e},decoder:b.i0("success"),resultKey:"data",friendlyName:`Restoring ${t}`}),(0,D.fold)((()=>{z.Z.log.message(`Failed to restore "${t}"`)}),(()=>e)))}async function at(t){return!!confirm("Delete all trash permanently?")&&(0,_.pipe)(await(0,R.D)({action:"breakdance_manage_templates_empty_trash",dataToPost:{postType:t},decoder:b.i0("success"),resultKey:"data",friendlyName:`Emptying trash for ${t}`}),(0,D.fold)((()=>!1),(()=>!0)))}var st=a(46368);const it=[{name:"Single Product",category:"Woo",textColor:"var(--brandWooCommerce)",backgroundColor:"var(--brandWooCommerceBackground)",settings:{type:"product",ruleGroups:[],priority:20}},{name:"Shop Page & All Product Archives",category:"Woo",textColor:"var(--brandWooCommerce)",backgroundColor:"var(--brandWooCommerceBackground)",settings:{type:"all-product-archives",ruleGroups:[],priority:10}},{name:"Specific Product Archive",category:"Woo",textColor:"var(--brandWooCommerce)",backgroundColor:"var(--brandWooCommerceBackground)",settings:{type:"specific-product-archive",ruleGroups:[[{ruleSlug:"product-is-taxonomy",operand:"is",value:[]}]],priority:20},openDialog:!0},{name:"Single Post",category:"Blog",textColor:"var(--brandWordPress)",backgroundColor:"var(--brandWordPressBackground)",settings:{type:"post",ruleGroups:[],priority:20}},{name:"Post Archive",category:"Blog",textColor:"var(--brandWordPress)",backgroundColor:"var(--brandWordPressBackground)",settings:{type:"post-archives",ruleGroups:[],priority:10}},{name:"404 Not Found",category:"Other",textColor:st.Z.green800_light,backgroundColor:st.Z.green100_light,settings:{type:"404",ruleGroups:[]}},{name:"Search Results",textColor:st.Z.green800_light,backgroundColor:st.Z.green100_light,category:"Other",settings:{type:"search",ruleGroups:[]}}];var nt=a(27517),lt=a(66383);let ot=class extends s.ZP{constructor(){super(...arguments),this.deleteInProgress=!1,this.restoreInProgress=!1}openEditTemplateModal(){"trash"!==this.mode&&this.$emit("input","edit",this.value)}get mode(){return this.value.status}get appliesToLabel(){const t=this.value.settings.type;let e="";return this.templateTypeCategories.some((a=>{const s=a.types.find((e=>e.slug===t));return!!s&&(e=s.label,!0)})),e}async deleteTemplate(){this.deleteInProgress=!0;const t=await tt(this.value.title,this.value.id,this.value.status);t&&this.$emit("publish"===this.value.status?"trash":"delete",t),this.deleteInProgress=!1}async restoreTemplate(){this.restoreInProgress=!0;const t=await et(this.value.title,this.value.id);t&&this.$emit("restore",t),this.restoreInProgress=!1}duplicateTemplate(){const t=(0,M.Z)(this.value);t.title=`Copy of "${t.title}"`,t.settings.disabled=!0,this.$emit("duplicate",t)}get matchingQuickAddTemplate(){return it.find((t=>t.settings.type===this.value.settings.type))}triggerLabels(t){return t.map((t=>t.slug)).join(", ")}updateDisabled(t){const e=(0,M.Z)(this.value);e.settings.disabled=!t,this.$emit("update",e)}};(0,d.gn)([(0,c.fI)()],ot.prototype,"value",void 0),(0,d.gn)([(0,c.fI)()],ot.prototype,"templateTypeCategories",void 0),(0,d.gn)([(0,c.fI)()],ot.prototype,"templateParents",void 0),ot=(0,d.gn)([(0,c.wA)({components:{ToggleInput:lt.Z,Icon:X.Z,ConditionsPreviewTooltip:j,ElementBadge:nt.Z}})],ot);const rt=ot,dt=rt;var ct=(0,W.Z)(dt,G,A,!1,null,null,null);const pt=ct.exports;var ut=a(73385),mt=a(70248),gt=a(61908),ht=a(11193),_t=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("Dropdown",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(u.Z,t._g({staticClass:"breakdance-wp-admin-templating-button",attrs:{elevation:"0",outlined:"",loading:t.quickAddInProgress}},a),[t._v(" Add Template ")])]}}]),model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[e(ut.Z,[e(mt.Z,{attrs:{dense:"",width:"350"}},[t._l(t.quickAddTemplates,(function(a){return e(gt.Z,{key:a.name,on:{click:function(e){return t.quickAdd(a)}}},[e(ht.V9,{staticClass:"quick-add-item"},[t._v(" "+t._s(a.name)+" "),e("ElementBadge",{attrs:{value:{backgroundColor:a.backgroundColor,textColor:a.textColor,label:a.category}}})],1)],1)})),e(gt.Z,{staticClass:"add-custom-template-wrapper"},[e(ht.V9,{staticClass:"add-custom-template-wrapper-title"},[e(u.Z,{staticClass:"breakdance-wp-admin-templating-button",attrs:{outlined:""},on:{click:function(e){return t.$emit("blankModal")}}},[t._v("Add Custom Template")])],1)],1)],2)],1)],1)],1)},vt=[],yt=a(90036),bt=a(18446),ft=a.n(bt);function kt(t,e){const a=e.findIndex((e=>e.id===t.id)),s=(0,M.Z)(e);return-1!==a?s[a]=(0,M.Z)(t):s.unshift((0,M.Z)(t)),s}function Tt(t,e){const a=e.findIndex((e=>"id"in e&&e.id===t)),s=(0,M.Z)(e);return-1!==a&&s.splice(a,1),s}function Zt(t,e,a){const s=e.findIndex((e=>"id"in e&&e.id===t)),i=(0,M.Z)(e);return-1!==s&&(i[s].status=a),i}function wt(t){return(0,M.Z)(t).filter((t=>"trash"!==t.status))}function Ct(t,e,a){const s=t.find((t=>ft()(t.settings,e)));return!s||confirm(`You already have a ${a} with the same settings called "${s.title}". Continue anyway?`)}let It=class extends s.ZP{constructor(){super(...arguments),this.open=!1,this.quickAddInProgress=!1}get quickAddTemplates(){return this.isWooCommerceActive?it:it.filter((t=>"woocommerce"!==t.category.toLowerCase()))}async quickAdd(t){const e={id:-1,title:t.name,editInBreakdanceLink:"",postType:"breakdance_template",settings:t.settings,status:"publish"};Ct(this.templates,t.settings,"template")&&(t.openDialog?this.$emit("modalWithSettings",e):(this.quickAddInProgress=!0,(0,_.pipe)(await H(e),(0,D.fold)((()=>{z.Z.log.message(`The new ${this.templateName} couldn't be saved`)}),(t=>{this.$emit("input",t)}))),this.quickAddInProgress=!1))}};(0,d.gn)([(0,c.fI)()],It.prototype,"templateName",void 0),(0,d.gn)([(0,c.fI)()],It.prototype,"isWooCommerceActive",void 0),(0,d.gn)([(0,c.fI)()],It.prototype,"templates",void 0),It=(0,d.gn)([(0,c.wA)({components:{Dropdown:yt.Z,ElementBadge:nt.Z}})],It);const St=It,Pt=St;var Bt=(0,W.Z)(Pt,_t,vt,!1,null,null,null);const xt=Bt.exports;var Dt=a(64940),Gt=a(75223),At=a(24437),Vt=a(12570),$t=a(5294),Lt=a(55234),Mt=a(76660),Ot=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(Vt.Z,{attrs:{value:!0,"max-width":"750",persistent:t.hasUnsavedChanges,scrollable:!0,transition:!1},on:{input:t.closeDialog}},[t.skipWarning?[e(ut.Z,{staticClass:"template-settings-modal-content",attrs:{width:"750",tile:"",flat:""}},[e(Gt.EB,{staticClass:"edit-template-modal-titlebar"},[e("h1",[t._v(" "+t._s("add"===t.mode?`Add ${t.templateName}`:`Editing "${t.internalValue.title}"`)+" ")]),e(Lt.Z)],1),e(Gt.ZB,[e("div",{staticClass:"mt-4 d-flex flex-column"},[e("FreeModeAlertForConditionsUsed",{attrs:{value:t.internalValue.settings.ruleGroups,"available-conditions":t.availableConditions}}),e($t.Z,[e(At.Z,{attrs:{cols:"12"}},[e("TextInput",{staticClass:"template-modal-not-so-wide",attrs:{value:t.internalValue.title,placeholder:`New ${t.templateName}`,size:"md",label:"Title"},on:{input:t.setTemplateTitle}}),t.titleError?e("div",{staticClass:"bde-templates_field-error"},[t._v(" "+t._s(t.titleError)+" ")]):t._e()],1),e(At.Z,{attrs:{cols:"12"}},[e("label",{staticClass:"breakdance-text-input__label"},[t._v("Location")]),e("DropdownInput",{staticClass:"breakdance-dense-select--md template-modal-not-so-wide",attrs:{placeholder:`Apply ${t.templateName} to...`,items:t.templateTypesDropdownInVuetifyShape,value:t.internalValue.settings.type},on:{input:t.setTemplateType},scopedSlots:t._u([{key:"selection",fn:function({item:a}){return[e("div",{staticClass:"v-select__selection v-select__selection--comma"},[t._v(" "+t._s(a.category)+" / "+t._s(a.text)+" ")])]}}],null,!1,1945710855)}),t.locationError?e("div",{staticClass:"bde-templates_field-error"},[t._v(" "+t._s(t.locationError)+" ")]):t._e()],1)],1),e("label",{staticClass:"mt-6 breakdance-text-input__label"},[t._v("Conditions")]),e("ConditionsMatrix",{attrs:{value:t.internalValue.settings.ruleGroups||[],availableConditions:t.availableConditions,templateType:t.internalValue.settings.type},on:{input:function(e){return t.updateRuleGroups(e)}}})],1),"breakdance_popup"===t.postType?e("div",[e("label",{staticClass:"mt-6 breakdance-text-input__label"},[t._v("Popup Opens When")]),e("TriggersMatrix",{attrs:{value:t.internalValue.settings.triggers||[],triggers:t.templatesManagementData.popupTriggers,"disable-trigger-limits":t.internalValue.settings.onlyShowOnce},on:{input:function(e){return t.updateTriggers(e)}}}),e("FreeModeAlertForPopupTriggers",{attrs:{value:t.internalValue.settings.triggers||[],triggers:t.templatesManagementData.popupTriggers}}),e("label",{staticClass:"d-flex mt-6 breakdance-text-input__label"},[t._v("Limit how often this popup shows")]),e("ToggleInput",{attrs:{value:t.hasOnlyShow},on:{input:t.toggleOnlyShow}}),t.hasOnlyShow?e("div",{staticClass:"d-flex"},[e("div",{staticClass:"flex-grow-1 template-rule-input-row"},[e("div",[e("label",{staticClass:"breakdance-text-input__label"},[t._v("Per Page Load")]),e("NumberInput",{attrs:{value:t.internalValue.settings.limitPageLoad},on:{input:t.setLimitPageLoad}})],1),e("div",[e("label",{staticClass:"breakdance-text-input__label"},[t._v("Per Session")]),e("NumberInput",{attrs:{value:t.internalValue.settings.limitSession},on:{input:t.setLimitSession}})],1),e("div",[e("label",{staticClass:"breakdance-text-input__label"},[t._v("Forever")]),e("NumberInput",{attrs:{value:t.internalValue.settings.limitForever},on:{input:t.setLimitForever}})],1)])]):t._e(),e("label",{staticClass:"d-flex mt-3 breakdance-text-input__label"},[t._v("Do not show this popup if any other popup has already shown")]),e("ToggleInput",{attrs:{value:t.internalValue.settings.avoidMultiple},on:{input:t.setAvoidMultiple}})],1):t._e(),"breakdance_popup"!==t.postType?e($t.Z,{staticClass:"mb-3"},[e(At.Z,{attrs:{cols:"12"}},[e("label",{staticClass:"breakdance-text-input__label mt-6",staticStyle:{"text-transform":"capitalize"}},[t._v(" Priority ")]),e("NumberInput",{staticClass:"breakdance-simple-number-input--md template-priority-input",attrs:{value:t.internalValue.settings.priority},on:{input:t.setTemplatePriority}}),t.priorityError?e("div",{staticClass:"bde-templates_field-error"},[t._v(" "+t._s(t.priorityError)+" ")]):t._e()],1),t.hasPermissionToManageFallbacks?e(At.Z,{attrs:{cols:"12"}},[e("label",{staticClass:"breakdance-text-input__label",staticStyle:{"text-transform":"capitalize"}},[t._v(" Fallback ")]),e(Mt.Z,{attrs:{"input-value":t.internalValue.settings.fallback},on:{change:t.setFallback}})],1):t._e()],1):t._e()],1),e(Gt.h7,{staticClass:"edit-template-modal-actions"},[e($t.Z,[e(At.Z,{staticClass:"text-left"},[t.hasUnsavedChanges?e(u.Z,{attrs:{text:""},on:{click:t.closeDialog}},[t._v(" Cancel ")]):t._e()],1),e(At.Z,{staticClass:"text-right"},[e(u.Z,{attrs:{color:"blue",dark:"",elevation:"0",loading:t.saveInProgress,disabled:t.isThereAnError},on:{click:t.saveTemplate}},["edit"===t.mode?[t._v("Save")]:[t._v("Add "+t._s(t.templateName))]],2)],1)],1)],1)],1)]:[e(ut.Z,{staticClass:"breakdance-dialog",attrs:{width:"400",tile:"",flat:""}},["add"===t.mode?[e(Gt.EB,{staticClass:"breakdance-dialog-title"},[t._v(" Add Custom Template ")]),e(Gt.ZB,{staticClass:"breakdance-dialog-contents"},[t._v(" Please read the documentation before creating custom templates. ")])]:t._e(),"edit"===t.mode?[e(Gt.EB,{staticClass:"breakdance-dialog-title"},[t._v(" Advanced Template Settings ")]),e(Gt.ZB,{staticClass:"breakdance-dialog-contents"},[t._v(" Please read the documentation before making customizations to template settings. ")])]:t._e(),e(Gt.h7,{staticClass:"breakdance-dialog-actions"},[e(u.Z,{attrs:{text:""},on:{click:function(e){return t.$emit("close")}}},[t._v(" Cancel ")]),e(u.Z,{attrs:{dark:"",color:"blue",medium:""},on:{click:t.acknowledgeWarning}},[t._v(" Continue ")])],1)],2)]],2)},Xt=[],Ft=a(94655),Et=a(63292),Nt=a(48727),Wt=a(87589),Ut=a(46429),jt=a(7892),Rt=a(89412),qt=a(89137),zt=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"trigger-matrix"},[t._l(t.value,(function(a,s){return e("div",{key:s,staticClass:"template-rule-group-wrapper"},[s>0?e("span",{staticClass:"template-rule-group-or"},[e("span",[t._v("OR")])]):t._e(),e("TriggerInput",{attrs:{value:a,triggers:t.triggers,"disable-limit":t.disableTriggerLimits},on:{input:function(e){return t.updateTrigger(e,s)},delete:function(e){return t.deleteTrigger(s)}}})],1)})),e("NiceButton",{staticClass:"breakdance-condition-matrix__add-condition",attrs:{outlined:"",text:"","data-test-id":"add-condition-button","left-icon":"PlusIcon"},on:{click:t.addTrigger}},[t._v(" Add Trigger ")])],2)},Kt=[],Ht=a(66477),Jt=a(35570),Qt=a(37956),Yt=a(55443),te=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"template-rule-group-condition"},[e("div",{staticClass:"template-rule-input-row flex-grow-1"},[e("div",[e("label",{staticClass:"breakdance-text-input__label"},[t._v("Trigger on")]),e("DropdownInput",{attrs:{placeholder:"Choose trigger...",items:t.availableTriggersForDropdown,value:t.value.slug},on:{input:t.setValue}})],1),"scroll"===t.value.slug?e("div",[e("label",{staticClass:"breakdance-text-input__label"},[t._v("Scrolls to")]),e("DropdownInput",{attrs:{items:t.scrollTypeOptions,value:t.scrollTypeValue},on:{input:t.setScrollType}})],1):t._e(),"click"===t.value.slug?e("div",[e("label",{staticClass:"breakdance-text-input__label"},[t._v("Click target")]),e("DropdownInput",{attrs:{items:t.clickTypeOptions,value:t.clickTypeValue},on:{input:t.setClickType}})],1):t._e(),t.hasDelayOption?e("div",[e("label",{staticClass:"breakdance-text-input__label"},[t._v(t._s(t.delayLabel))]),e("NumberInput",{attrs:{value:t.delayValue},on:{input:t.setDelay}})],1):t._e(),t.hasPercentOption?e("div",[e("label",{staticClass:"breakdance-text-input__label"},[t._v("Percent")]),e("NumberInput",{attrs:{value:t.value.options.percent},on:{input:t.setPercent}})],1):t._e(),t.hasSelectorOption?e("div",[e("label",{staticClass:"breakdance-text-input__label"},[t._v("Selector")]),e("TextInput",{attrs:{placeholder:"#elementId",value:t.value.options.selector},on:{input:t.setSelector}})],1):t._e()]),e("div",{staticClass:"d-flex"},[e("IconButton",{staticClass:"template-rule-group-delete mt-6",attrs:{icon:"TrashIcon",size:"16",small:!0},on:{click:function(e){return t.$emit("delete")}}})],1)])},ee=[],ae=a(79686),se=a(46145),ie=a(8619),ne=a(13960);let le=class extends s.ZP{get availableTriggersForDropdown(){return this.triggers.map((t=>({text:t.proOnly?(0,ne.LX)(t.text):t.text,value:t.value})))}setValue(t){const e=(0,M.Z)(this.value);e.slug=t??void 0,this.update(e)}setDelay(t){const e=(0,M.Z)(this.value);e.options={...e.options,delay:t??void 0},this.update(e)}setPercent(t){const e=(0,M.Z)(this.value);e.options={...e.options,percent:t??void 0},this.update(e)}setSelector(t){const e=(0,M.Z)(this.value);e.options={...e.options,selector:t??void 0},this.update(e)}setScrollType(t){const e=(0,M.Z)(this.value);e.options={...e.options,scrollType:t},this.update(e)}get scrollTypeOptions(){return[{text:"Percent",value:"percent"},{text:"Selector",value:"selector"}]}get scrollTypeValue(){return this.value?.options?.scrollType??null}setClickType(t){const e=(0,M.Z)(this.value);e.options={...e.options,clickType:t},this.update(e)}get clickTypeOptions(){return[{text:"Anywhere",value:"anywhere"},{text:"Selector",value:"selector"}]}get clickTypeValue(){return this.value?.options?.clickType??null}get delayValue(){return this.value?.options?.delay??null}get delayLabel(){return"inactivity"===this.value.slug?"Inactivity length (seconds)":"Show after (seconds)"}get hasPercentOption(){return"scroll"===this.value.slug&&"percent"===this.value.options?.scrollType}get hasDelayOption(){return"load"===this.value.slug||"inactivity"===this.value.slug}get hasSelectorOption(){return"scroll"===this.value.slug&&"selector"===this.value.options?.scrollType||"click"===this.value.slug&&"selector"===this.value.options?.clickType}update(t){this.$emit("input",t)}};(0,d.gn)([(0,c.fI)()],le.prototype,"value",void 0),(0,d.gn)([(0,c.fI)()],le.prototype,"triggers",void 0),(0,d.gn)([(0,c.fI)({default:!1})],le.prototype,"disableLimit",void 0),le=(0,d.gn)([(0,c.wA)({components:{NumberInput:Ut.Z,Icon:X.Z,CodeInput:se.Z,DynamicDataFieldText:ae.Z,TextInput:Wt.Z,DropdownInput:Nt.Z,IconButton:ie.Z}})],le);const oe=le,re=oe;var de=(0,W.Z)(re,te,ee,!1,null,null,null);const ce=de.exports;let pe=class extends s.ZP{addTrigger(){const t=(0,M.Z)(this.value);t.push({}),this.$emit("input",t)}deleteTrigger(t){const e=(0,M.Z)(this.value);e.splice(t,1),this.$emit("input",e)}updateTrigger(t,e){const a=(0,M.Z)(this.value);a[e]=t,this.$emit("input",a)}};(0,d.gn)([(0,c.fI)()],pe.prototype,"value",void 0),(0,d.gn)([(0,c.fI)()],pe.prototype,"triggers",void 0),(0,d.gn)([(0,c.fI)({default:!1})],pe.prototype,"disableTriggerLimits",void 0),pe=(0,d.gn)([(0,c.wA)({components:{TriggerInput:ce,NiceButton:Yt.Z,Icon:X.Z,DynamicDataFields:Ht.Z,DynamicDataDialog:Jt.Z,TemplateRuleGroupInput:Qt.Z}})],pe);const ue=pe,me=ue;var ge=(0,W.Z)(me,zt,Kt,!1,null,null,null);const he=ge.exports;var _e=a(22311),ve=function(){var t=this,e=t._self._c;t._self._setupProxy;return t.areProTriggersUsed?e("ProOnlyAlertBox",{staticClass:"mb-5 mt-6",attrs:{options:{feature:"popups",content:"Get Breakdance Pro to get access to all popup triggers."}}}):t._e()},ye=[],be=a(2755);let fe=class extends s.ZP{get areProTriggersUsed(){return(0,ne.qS)(this.value,this.triggers)}};(0,d.gn)([(0,c.fI)()],fe.prototype,"value",void 0),(0,d.gn)([(0,c.fI)()],fe.prototype,"triggers",void 0),fe=(0,d.gn)([(0,c.wA)({components:{ProOnlyAlertBox:be.Z}})],fe);const ke=fe,Te=ke;var Ze=(0,W.Z)(Te,ve,ye,!1,null,null,null);const we=Ze.exports;let Ce=class extends s.ZP{constructor(){super(...arguments),this.internalValue=(0,M.Z)(this.value),this.editingAdvancedSettings=!1,this.saveInProgress=!1,this.attemptedToSave=!1,this.onlyShowOpen=!1}acknowledgeWarning(){this.$emit("skipWarning",!0)}beforeMount(){"breakdance_template"!==this.value.postType&&this.acknowledgeWarning()}mounted(){(0,Rt.w)(),this.warnIfUnsavedFunction=(0,jt.$)((()=>this.hasUnsavedChanges))}get templateName(){return"breakdance_template"===this.postType?"template":"breakdance_footer"===this.postType?"footer":"breakdance_header"===this.postType?"header":"breakdance_popup"===this.postType?"popup":"Unsupported template"}get templateTypesDropdownInVuetifyShape(){const t=[];return this.templatesManagementData.templateTypeCategories.forEach((e=>{t.push({header:e.label}),t.push(...e.types.map((t=>({category:e.label,text:t.label,value:t.slug})))),t.push({divider:!0})})),t.pop(),t}get selectedLocationCategory(){return this.templatesManagementData.templateTypeCategories.find((t=>t.types.find((t=>t.slug===this.internalValue.settings.type))))}get categoryLabelForSelectedLocation(){return this.selectedLocationCategory?.label}get labelForSelectedLocation(){return this.selectedLocationCategory?.types.find((t=>t.slug===this.internalValue.settings.type))?.label||this.internalValue.settings.type}get labelForInheritingParent(){return this.templateParents.find((t=>t.value===this.internalValue.settings.parentId))?.text||`Parent with ID: ${this.internalValue.settings.parentId}`}get availableConditions(){const t=(0,Et.nt)(this.templatesManagementData.conditions,this.internalValue.settings.type);return this.internalValue.settings.type?(0,Et.jp)(t,[this.internalValue.settings.type]).filter((t=>t.supports.includes("templating"))):t.filter((t=>t.supports.includes("templating")))}get templateParentsExcludingCurrentTemplate(){const t=this.templateParents.filter((t=>this.value.id!==t.value));return this.inheritedTemplateNoLongerExists&&this.internalValue.settings.parentId&&t.unshift({text:`Selected template with ID: ${this.internalValue.settings.parentId} no longer exists.`,value:this.internalValue.settings.parentId}),t}get inheritedTemplateNoLongerExists(){return!!this.internalValue.settings.parentId&&!this.templateParents.find((t=>t.value===this.internalValue.settings.parentId))}get inheritanceUiEnabled(){return"breakdance_template"===this.postType}setTemplateTitle(t){this.internalValue={...this.internalValue,title:t||""}}updateTemplateSettings(t){this.internalValue.settings=(0,M.Z)(t)}async saveTemplate(){if(this.attemptedToSave=!0,this.isThereAnError)return;const t=(0,M.Z)(this.internalValue);t.settings.priority||(t.settings.priority=1);const e=!ft()(this.value.settings,t.settings);e&&!Ct(this.templates,t.settings,this.templateName)||(this.saveInProgress=!0,t.settings.ruleGroups=t.settings.ruleGroups&&(0,Et.ar)(t.settings.ruleGroups)||[],t.settings.triggers=t.settings.triggers&&t.settings.triggers.filter((t=>Object.keys(t).length>0))||[],t.settings.type=t.settings.type||"none",t.title=t.title||`New ${this.postType}`,(0,_.pipe)(await H(t),(0,D.fold)((()=>{z.Z.log.message(`${this.templateName} was not saved, or it was saved but the value is invalid`)}),(t=>{this.$emit("input",t)}))),this.saveInProgress=!1,this.closeDialog())}setTemplateType(t){const e=(0,M.Z)(this.internalValue.settings);e.type=t,this.internalValue.settings&&e.type===this.internalValue.settings.type||(e.ruleGroups=[]),e.type&&(e.priority=this.getDefaultTemplatePriorityBasedOnType(e.type)),this.updateTemplateSettings(e)}setTemplateParent(t){const e=(0,M.Z)(this.internalValue.settings);t?e.parentId=t:delete e.parentId,this.updateTemplateSettings(e)}setTemplatePriority(t){const e=(0,M.Z)(this.internalValue.settings);e.priority=t??void 0,this.updateTemplateSettings(e)}getDefaultTemplatePriorityBasedOnType(t){return this.templatesManagementData.templateTypeCategories.flatMap((t=>t.types)).find((e=>e.slug===t))?.defaultPriority}updateRuleGroups(t){const e=(0,M.Z)(this.internalValue.settings);e.ruleGroups=t,this.updateTemplateSettings(e)}updateTriggers(t){const e=(0,M.Z)(this.internalValue.settings);e.triggers=t,this.updateTemplateSettings(e)}get locationError(){return!!this.attemptedToSave&&(!this.internalValue.settings.type&&"Location is required")}get titleError(){return!!this.attemptedToSave&&(!this.internalValue.title&&"Title is required")}get priorityError(){return!!this.attemptedToSave&&(void 0!==this.internalValue.settings.priority&&("breakdance_popup"!==this.postType&&(this.internalValue.settings.priority<1&&"The minimum priority is 1")))}get isThereAnError(){return!!(this.priorityError||this.titleError||this.locationError)}get hasUnsavedChanges(){return!ft()(this.internalValue,this.value)}closeDialog(){(0,jt.e)(this.warnIfUnsavedFunction),this.$emit("close")}setFallback(t){const e=(0,M.Z)(this.internalValue.settings);e.fallback=t,this.updateTemplateSettings(e)}setOnlyShowOnce(t){const e=(0,M.Z)(this.internalValue.settings);e.onlyShowOnce=t,this.updateTemplateSettings(e)}setAvoidMultiple(t){const e=(0,M.Z)(this.internalValue.settings);e.avoidMultiple=t,this.updateTemplateSettings(e)}toggleOnlyShow(t){t||(this.setLimitPageLoad(null),this.setLimitSession(null),this.setLimitForever(null)),this.onlyShowOpen=t}get hasOnlyShow(){return!0===this.onlyShowOpen||(this.internalValue.settings.limitForever||this.internalValue.settings.limitSession||this.internalValue.settings.limitPageLoad)}setLimitPageLoad(t){const e=(0,M.Z)(this.internalValue.settings);e.limitPageLoad=t,this.updateTemplateSettings(e)}setLimitSession(t){const e=(0,M.Z)(this.internalValue.settings);e.limitSession=t,this.updateTemplateSettings(e)}setLimitForever(t){const e=(0,M.Z)(this.internalValue.settings);e.limitForever=t,this.updateTemplateSettings(e)}};(0,d.gn)([(0,c.fI)()],Ce.prototype,"value",void 0),(0,d.gn)([(0,c.fI)()],Ce.prototype,"postType",void 0),(0,d.gn)([(0,c.fI)()],Ce.prototype,"mode",void 0),(0,d.gn)([(0,c.fI)()],Ce.prototype,"templatesManagementData",void 0),(0,d.gn)([(0,c.fI)()],Ce.prototype,"templateParents",void 0),(0,d.gn)([(0,c.fI)()],Ce.prototype,"templates",void 0),(0,d.gn)([(0,c.fI)()],Ce.prototype,"skipWarning",void 0),(0,d.gn)([(0,c.fI)()],Ce.prototype,"hasPermissionToManageFallbacks",void 0),Ce=(0,d.gn)([(0,c.wA)({components:{FreeModeAlertForConditionsUsed:_e.Z,FreeModeAlertForPopupTriggers:we,ToggleInput:lt.Z,TriggersMatrix:he,Icon:X.Z,NumberInput:Ut.Z,TextInput:Wt.Z,DropdownInput:Nt.Z,ConditionsMatrix:Ft.Z,Dialog:qt.Z}})],Ce);const Ie=Ce,Se=Ie;var Pe=(0,W.Z)(Se,Ot,Xt,!1,null,null,null);const Be=Pe.exports;var xe=a(75051),De=a(61033),Ge=function(){var t=this,e=t._self._c;t._self._setupProxy;return 0===t.value.itemsByStatus||0===t.value.filteredItemsBySearch?e("div",{staticClass:"manage-templates__empty"},["Header"==t.value.templateName?e("svg",{staticClass:"manage-templates__empty-state-icon",attrs:{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"}},[e("path",{attrs:{d:"M92.708 3.125H7.292a4.167 4.167 0 0 0-4.167 4.167v85.416a4.167 4.167 0 0 0 4.167 4.167h85.416a4.167 4.167 0 0 0 4.167-4.167V7.292a4.167 4.167 0 0 0-4.167-4.167ZM3.125 34.375h93.75",stroke:"currentColor","stroke-width":"6.25","stroke-linecap":"round","stroke-linejoin":"round"}})]):t._e(),"Footer"==t.value.templateName?e("svg",{staticClass:"manage-templates__empty-state-icon",attrs:{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"}},[e("path",{attrs:{d:"M92.708 3.125H7.292a4.167 4.167 0 0 0-4.167 4.167v85.416a4.167 4.167 0 0 0 4.167 4.167h85.416a4.167 4.167 0 0 0 4.167-4.167V7.292a4.167 4.167 0 0 0-4.167-4.167ZM96.875 65.625H3.125",stroke:"currentColor","stroke-width":"6.25","stroke-linecap":"round","stroke-linejoin":"round"}})]):t._e(),"Template"==t.value.templateName||"Unsupported template"==t.value.templateName||"Global Block"==t.value.templateName?e("svg",{staticClass:"manage-templates__empty-state-icon",attrs:{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"}},[e("path",{attrs:{d:"M92.708 3.125H7.292a4.167 4.167 0 0 0-4.167 4.167v85.416a4.167 4.167 0 0 0 4.167 4.167h85.416a4.167 4.167 0 0 0 4.167-4.167V7.292a4.167 4.167 0 0 0-4.167-4.167ZM50 3.125v93.75M50 34.375h46.875M96.875 65.625H50M50 50H3.125",stroke:"currentColor","stroke-width":"6.25","stroke-linecap":"round","stroke-linejoin":"round"}})]):0===t.value.itemsByStatus?e("div",[e("h4",[t._v(" You have no "+t._s(t.value.showTrash?"deleted":"published")+" "+t._s(t.value.templateName.toLowerCase())+"s. ")])]):0===t.value.filteredItemsBySearch?e("div",[e("h4",[t._v("No "+t._s(t.value.templateName.toLowerCase())+"s found.")])]):t._e()]):t._e()},Ae=[],Ve=a(82436);let $e=class extends s.ZP{get isBreakdanceDevelopmentEnvironment(){return(0,Ve.y)()}};(0,d.gn)([(0,c.fI)()],$e.prototype,"value",void 0),$e=(0,d.gn)([(0,c.wA)({})],$e);const Le=$e,Me=Le;var Oe=(0,W.Z)(Me,Ge,Ae,!1,null,null,null);const Xe=Oe.exports;var Fe=a(16734),Ee=a(90878);let Ne=class extends s.ZP{constructor(){super(...arguments),this.modalData=!1,this.skipWarning=!1,this.templates=[],this.templatesManagementData={conditions:[],dynamicFields:[],templateTypeCategories:[],popupTriggers:null},this.isWooCommerceActive=!1,this.search="",this.showTrash=!1,this.newTemplateAdded=!1,this.hasPermissionToManageFallbacks=!1,this.emptyingTrash=!1,this.isLoadingData=!1,this.broadcastChannel=null}onTemplateAdded(){setTimeout((()=>this.newTemplateAdded=!1),1e3)}get templatesForUi(){return this.hasPermissionToManageFallbacks?this.templatesByStatus:this.templatesByStatus.filter((t=>!t.settings?.fallback))}get filteredTemplatesBySearch(){return this.search?this.templatesForUi.filter((t=>t.title.toLowerCase().includes(this.search.toLowerCase())||t.settings?.type?.includes(this.search.toLowerCase()))):this.templatesForUi}get templatesByStatus(){return this.templates.filter((t=>this.showTrash?"trash"===t.status:"publish"===t.status))}get blankTemplateWithValidSettings(){return{id:-1,title:"",postType:this.postType,editInBreakdanceLink:"",settings:{},status:"publish"}}get trashLength(){return this.templates.filter((t=>"trash"===t.status)).length}async duplicateTemplate(t){(0,_.pipe)(await J(t),(0,D.fold)((()=>{z.Z.log.message(`Duplicating template "${t.id}" failed`)}),(t=>{this.saveTemplate(t)})))}async updateTemplate(t){(0,_.pipe)(await H(t),(0,D.fold)((()=>{z.Z.log.message(`Update for template "${t.id}" failed`)}),(t=>{this.templates=kt(t,this.templates)})))}saveTemplate(t){this.templates=kt(t,this.templates),this.newTemplateAdded=!0}deleteTemplate(t){this.templates=Tt(t,this.templates)}trashTemplate(t){this.templates=Zt(t,this.templates,"trash")}restoreTemplate(t){this.templates=Zt(t,this.templates,"publish")}async emptyTrash(){this.emptyingTrash=!0,await at(this.postType)&&(this.templates=wt(this.templates),this.showTrash=!1),this.emptyingTrash=!1}get templateParentsWithoutTrashed(){return this.templates.filter((t=>"trash"!==t.status)).map((t=>({text:t.title,value:t.id})))}get templateName(){return"breakdance_template"===this.postType?"Template":"breakdance_footer"===this.postType?"Footer":"breakdance_header"===this.postType?"Header":"breakdance_popup"===this.postType?"Popup":"Unsupported template"}get emptyStateData(){return{itemsByStatus:this.templatesByStatus.length,filteredItemsBySearch:this.filteredTemplatesBySearch.length,templateName:this.templateName,showTrash:this.showTrash}}get searchInputPlaceholder(){const t=this.templateName.toLowerCase();return`Search for ${t}s`}beforeMount(){this.broadcastChannel=(0,Ee.a)()}async mounted(){Fe.uq.register("b r e a k d a n c e",(()=>{this.hasPermissionToManageFallbacks=!this.hasPermissionToManageFallbacks})),this.isLoadingData=!0,(0,_.pipe)(await Q(this.postType),(0,D.fold)((()=>{z.Z.log.message("Couldn't load templates data")}),(t=>{this.templates=t.templates,this.templatesManagementData=t.templatesManagementData,this.isWooCommerceActive=t.isWooCommerceActive,Dt.PK.setDynamicFields(t.templatesManagementData.dynamicFields),Dt.PK.setConditions(t.templatesManagementData.conditions),Dt.PK.setEnvironment(t.environment)}))),this.isLoadingData=!1}beforeDestroy(){Fe.uq.unbind("b r e a k d a n c e"),this.broadcastChannel&&this.broadcastChannel.close()}getTemplateWithValidSettings(t){return{...t,settings:(0,_.pipe)(t.settings,Z.decode,(0,D.fold)((()=>Ue),(t=>t)))}}handleTemplateCardModal(t,e){this.modalData={type:t,data:e}}};(0,d.gn)([(0,c.fI)()],Ne.prototype,"postType",void 0),(0,d.gn)([(0,c.RL)("newTemplateAdded")],Ne.prototype,"onTemplateAdded",null),Ne=(0,d.gn)([(0,c.wA)({components:{Icon:X.Z,SearchInput:De.Z,Loading:xe.Z,Notifications:p.Z,EditTemplateModal:Be,AddTemplateDropdown:xt,TemplateRow:pt,EmptyState:Xe}})],Ne);const We=Ne,Ue={type:"none",ruleGroups:[]},je=We;var Re=(0,W.Z)(je,g,h,!1,null,null,null);const qe=Re.exports;var ze=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[t.isLoadingData?e("Loading"):t._e(),e("div",{staticClass:"manage-templates"},[e("div",{staticClass:"manage-templates__header"},[e("h1",{staticClass:"manage-templates__title"},[t._v(" "+t._s(t.showTrash?"Deleted Global Blocks":"Global Blocks")+" ")]),t.showTrash?t._e():[e(u.Z,{staticClass:"breakdance-wp-admin-templating-button",attrs:{elevation:"0",outlined:""},on:{click:function(e){t.modalData={type:"add",data:t.blankGlobalBlock}}}},[t._v(" Add Global Block ")])]],2),this.globalBlocksByStatus.length>0||this.filteredBlocksBySearch.length>0||t.trashLength>0||t.showTrash?e("div",{staticClass:"manage-templates__actions"},[e("div",{staticClass:"manage-templates__search"},[e("SearchInput",{attrs:{placeholder:"Search blocks"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t.trashLength||t.showTrash?e("div",{staticClass:"manage-templates__secondary-actions"},[t.showTrash&&this.globalBlocksByStatus.length?e(u.Z,{attrs:{text:"",loading:t.emptyingTrash},on:{click:t.emptyTrash}},[e("Icon",{staticClass:"mr-2",attrs:{icon:"TrashIcon",size:"16"}}),t._v(" Empty Trash ")],1):t._e(),t.trashLength||t.showTrash?e(u.Z,{staticClass:"mr-2",attrs:{text:""},on:{click:function(e){t.showTrash=!t.showTrash}}},[t.showTrash?[e("Icon",{staticClass:"mr-2",attrs:{icon:"ArrowLeftLongIcon",size:"16"}}),t._v(" Back ")]:[e("Icon",{staticClass:"mr-2",attrs:{icon:"TrashIcon",size:"16"}}),t._v(" Trash ("+t._s(t.trashLength)+") ")]],2):t._e()],1):t._e()]):t._e()]),e("EmptyState",{attrs:{value:t.emptyStateData}}),t.filteredBlocksBySearch.length>0?e(m.Z,{staticClass:"manage-templates__table breakdance-table",class:t.newBlockAdded?"added":""},[e("thead",[e("tr",[e("th",[t._v("Template")]),e("th",[t._v("Shortcode")])])]),e("transition-group",{attrs:{tag:"tbody",name:"fade",mode:"out-in"}},t._l(t.filteredBlocksBySearch,(function(a){return e("BlockRow",{key:a.id,class:t.newBlockAdded?"":"animation-disabled",attrs:{value:a},on:{input:function(e){t.modalData={type:"edit",data:e}},trash:t.trashBlock,delete:t.deleteBlock,restore:t.restoreBlock,save:t.saveBlockToWordPress}})})),1)],1):t._e(),t.modalData?e("EditGlobalBlockModal",{attrs:{value:t.modalData.data,mode:t.modalData.type,globalBlocks:t.globalBlocksByStatus},on:{input:function(e){return t.saveBlock(e)},close:function(e){t.modalData=!1}}}):t._e()],1)},Ke=[],He=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(Vt.Z,{attrs:{value:!0,"max-width":"600",persistent:t.hasUnsavedChanges,scrollable:!0,transition:!1},on:{input:t.closeDialog}},[e(ut.Z,{staticClass:"template-settings-modal-content",attrs:{tile:"",flat:"",width:"600"}},[e(Gt.EB,{staticClass:"edit-template-modal-titlebar"},[e("h1",[t._v(" "+t._s("add"===t.mode?"Add Global Block":`Editing "${t.internalValue.label}"`)+" ")])]),e(Gt.ZB,[e("div",{staticClass:"my-3"},[e("TextInput",{attrs:{value:t.internalValue.label,placeholder:"New Global Block",label:"Title",size:"md"},on:{input:t.setLabel}})],1)]),e(Gt.h7,{staticClass:"edit-template-modal-actions"},[e($t.Z,[e(At.Z,{staticClass:"text-left"},[t.hasUnsavedChanges?e(u.Z,{attrs:{text:""},on:{click:t.closeDialog}},[t._v(" Cancel ")]):t._e()],1),e(At.Z,{staticClass:"text-right"},[e(u.Z,{attrs:{color:"blue",dark:"",elevation:"0",loading:t.saveInProgress},on:{click:t.saveGlobalBlock}},["edit"===t.mode?[t._v("Save")]:[t._v("Add Global Block")]],2)],1)],1)],1)],1)],1)},Je=[],Qe=a(87615);let Ye=class extends s.ZP{constructor(){super(...arguments),this.internalValue=(0,M.Z)(this.value),this.saveInProgress=!1}mounted(){(0,Rt.w)(),this.warnIfUnsavedFunction=(0,jt.$)((()=>this.hasUnsavedChanges))}setLabel(t){this.internalValue.label=t||""}get hasUnsavedChanges(){return!ft()(this.internalValue,this.value)}closeDialog(){(0,jt.e)(this.warnIfUnsavedFunction),this.$emit("close")}async saveGlobalBlock(){this.internalValue.label?this.globalBlocks.find((t=>t.label===this.internalValue.label))?z.Z.log.message(`A global block with the title "${this.internalValue.label}" already exists. Please select another title.`):(0,_.pipe)(await(0,Qe.v_)(this.internalValue),(0,D.fold)((()=>{z.Z.log.message("Global block was not saved")}),(t=>{this.$emit("input",t),this.closeDialog()}))):z.Z.log.message("Title field can't be empty")}};(0,d.gn)([(0,c.fI)()],Ye.prototype,"value",void 0),(0,d.gn)([(0,c.fI)()],Ye.prototype,"mode",void 0),(0,d.gn)([(0,c.fI)()],Ye.prototype,"globalBlocks",void 0),Ye=(0,d.gn)([(0,c.wA)({components:{NumberInput:Ut.Z,TextInput:Wt.Z,DropdownInput:Nt.Z,ConditionsMatrix:Ft.Z}})],Ye);const ta=Ye,ea=ta;var aa=(0,W.Z)(ea,He,Je,!1,null,null,null);const sa=aa.exports;var ia=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("tr",[e("td",[e("a",{staticClass:"manage-templates__title-link",attrs:{target:"_top",href:t.value.editInBreakdanceLink}},[t._v(" "+t._s(t.value.label)+" "),e("span",{staticClass:"manage-templates__title-id"},[t._v("#"+t._s(t.value.id))])]),e("div",{staticClass:"manage-templates__row-actions"},["publish"===t.mode?e("a",{staticClass:"manage-templates__btn-action",attrs:{href:t.value.editInBreakdanceLink,target:"_top",title:"Edit in Breakdance"}},[t._v(" Edit in Breakdance ")]):t._e(),"publish"===t.mode?e("button",{staticClass:"manage-templates__btn-action",on:{click:t.openEditBlockModal}},[t._v(" Settings ")]):t._e(),"publish"===t.mode?e("button",{staticClass:"manage-templates__btn-action",on:{click:t.duplicateBlock}},[t._v(" Duplicate ")]):t._e(),"trash"===t.mode?e("button",{staticClass:"manage-templates__btn-action",attrs:{title:"Restore"},on:{click:t.restoreBlock}},[t._v(" Restore ")]):t._e(),e("button",{staticClass:"manage-templates__btn-action is-danger",attrs:{title:"publish"===t.mode?"Trash":"Delete permanently"},on:{click:t.deleteBlock}},[t._v(" "+t._s("publish"===t.mode?"Trash":"Delete permanently")+" ")])])]),e("td",[e("input",{staticClass:"block-shortcode",attrs:{type:"text"},domProps:{value:`[breakdance_block blockId=${t.value.id}]`},on:{click:t.highlightValue}})])])},na=[];let la=class extends s.ZP{constructor(){super(...arguments),this.deleteInProgress=!1,this.restoreInProgress=!1}openEditBlockModal(){this.$emit("input",this.value)}duplicateBlock(){const t=(0,M.Z)(this.value);t.id=-1,t.label=`Copy of "${t.label}"`,this.$emit("save",t)}async deleteBlock(){this.deleteInProgress=!0;const t=await tt(this.value.label,this.value.id,this.value.status);t&&this.$emit("publish"===this.value.status?"trash":"delete",t),this.deleteInProgress=!1}async restoreBlock(){this.restoreInProgress=!0;const t=await et(this.value.label,this.value.id);t&&this.$emit("restore",t),this.restoreInProgress=!1}get mode(){return this.value.status}highlightValue(t){const e=()=>t.target.select();setTimeout((()=>{e()}),100)}};(0,d.gn)([(0,c.fI)()],la.prototype,"value",void 0),la=(0,d.gn)([(0,c.wA)({components:{Icon:X.Z}})],la);const oa=la,ra=oa;var da=(0,W.Z)(ra,ia,na,!1,null,null,null);const ca=da.exports;let pa=class extends s.ZP{constructor(){super(...arguments),this.modalData=!1,this.globalBlocks=[],this.showTrash=!1,this.newBlockAdded=!1,this.emptyingTrash=!1,this.isLoadingData=!1,this.search="",this.broadcastChannel=null}onBlockAdded(){setTimeout((()=>this.newBlockAdded=!1),1e3)}get blankGlobalBlock(){return{label:"",id:-1,tree:!1,editInBreakdanceLink:"",status:"publish"}}async saveBlockToWordPress(t){(0,_.pipe)(await(0,Qe.v_)(t),(0,D.fold)((()=>{z.Z.log.message("Global block was not saved")}),(t=>{this.saveBlock(t)})))}saveBlock(t){this.globalBlocks=kt(t,this.globalBlocks),this.newBlockAdded=!0}deleteBlock(t){this.globalBlocks=Tt(t,this.globalBlocks)}trashBlock(t){this.globalBlocks=Zt(t,this.globalBlocks,"trash")}restoreBlock(t){this.globalBlocks=Zt(t,this.globalBlocks,"publish")}async emptyTrash(){this.emptyingTrash=!0,await at("breakdance_block")&&(this.globalBlocks=wt(this.globalBlocks),this.showTrash=!1),this.emptyingTrash=!1}get emptyStateData(){return{itemsByStatus:this.globalBlocksByStatus.length,filteredItemsBySearch:this.filteredBlocksBySearch.length,templateName:"Global Block",showTrash:this.showTrash}}get filteredBlocksBySearch(){return this.globalBlocksByStatus.filter((t=>t.label.toLowerCase().includes(this.search.toLowerCase())))}get globalBlocksByStatus(){return this.globalBlocks.filter((t=>this.showTrash?"trash"===t.status:"publish"===t.status))}get trashLength(){return this.globalBlocks.filter((t=>"trash"===t.status)).length}beforeMount(){this.broadcastChannel=(0,Ee.a)()}async mounted(){this.isLoadingData=!0,(0,_.pipe)(await Y(),(0,D.fold)((()=>{z.Z.log.message("Couldn't load Global Blocks data")}),(t=>{this.globalBlocks=t}))),this.isLoadingData=!1}beforeDestroy(){this.broadcastChannel&&this.broadcastChannel.close()}};(0,d.gn)([(0,c.RL)("newBlockAdded")],pa.prototype,"onBlockAdded",null),pa=(0,d.gn)([(0,c.wA)({components:{Icon:X.Z,SearchInput:De.Z,Loading:xe.Z,BlockRow:ca,EditGlobalBlockModal:sa,EmptyState:Xe}})],pa);const ua=pa,ma=ua;var ga=(0,W.Z)(ma,ze,Ke,!1,null,null,null);const ha=ga.exports;let _a=class extends s.ZP{constructor(){super(...arguments),this.addingTemplate=!1}mounted(){(0,Fe.B6)(document),Dt.PK.setSubscriptionMode(window.Breakdance.subscriptionMode)}get isBlockPostType(){return"breakdance_block"===this.postType||"breakdance_acf_block"===this.postType}};(0,d.gn)([(0,c.fI)()],_a.prototype,"postType",void 0),_a=(0,d.gn)([(0,c.wA)({components:{ManageGlobalBlocks:ha,ManageTemplates:qe,Notifications:p.Z}})],_a);const va=_a,ya=va;var ba=(0,W.Z)(ya,o,r,!1,null,null,null);const fa=ba.exports;var ka=a(74604);s.ZP.directive("permission",ka.Z),s.ZP.config.productionTip=!1;const Ta=new URLSearchParams(window.parent.location.search).get("page");new s.ZP({store:i.ZP,vuetify:n.Z,render:t=>t(fa,{props:{postType:Ta}})}).$mount("#manage-templates-wrapper")},99697:(t,e,a)=>{a.d(e,{DD:()=>d,Gc:()=>g,ZQ:()=>r,bn:()=>p,dV:()=>c});var s=a(32521),i=a(47902);const n=s.dt({text:s.Z_,value:s.Z_}),l=s.G0([s.i0("is"),s.i0("is not"),s.i0("is one of"),s.i0("is all of"),s.i0("is none of"),s.i0("is before"),s.i0("is after"),s.i0("is greater than"),s.i0("is less than"),s.i0("contains"),s.i0("does not contain"),s.i0("is empty"),s.i0("is not empty"),s.Z_]),o=s.r$({ruleSlug:s.Z_,ruleDynamic:s.G0([s.Z_,s.S1]),ruleDynamicMeta:s.G0([i.DU,s.S1]),operand:l,value:s.G0([s.Z_,s.pk,s.IX(s.Z_),s.IX(n)]),valueDynamicMeta:s.G0([i.DU,s.S1])}),r=s.IX(o),d=s.jV([s.dt({label:s.Z_,items:s.IX(n)}),s.r$({availableForType:s.G0([s.i0(!1),s.IX(s.Z_)])})]),c=s.iG(s.dt({slug:s.Z_,label:s.Z_,category:s.Z_,operands:s.IX(l),values:s.G0([s.IX(d),s.i0(!1)]),valueInputType:s.G0([s.S1,s.i0("dropdown"),s.i0("datepicker"),s.i0("number"),s.i0("timepicker")]),availableForType:s.IX(s.Z_),supports:s.IX(s.G0([s.i0("element_display"),s.i0("templating"),s.i0("query_builder")])),proOnly:s.G0([s.S1,s.O7])})),p=s.IX(c),u=s.r$({delay:s.pk,percent:s.pk,selector:s.Z_,scrollType:s.Z_,clickType:s.Z_,limit:s.pk}),m=s.r$({slug:s.Z_,options:u}),g=s.IX(m)},88667:(t,e,a)=>{a.d(e,{vZ:()=>o});var s=a(32521),i=a(32874);const n=s.dt({fileName:s.Z_,fileUrl:s.Z_,format:s.G0([s.i0("woff"),s.i0("woff2")])}),l=s.dt({id:s.Z_,files:s.IX(n),weight:s.pk,style:s.G0([s.i0("normal"),s.i0("italic")])}),o=s.dt({id:s.Z_,family:s.Z_,cssUrl:s.Z_,hasExternalCssUrl:s.O7,cssName:s.Z_,fallbackString:s.G0([s.Z_,s.S1]),faces:s.IX(l)});s.IX(s.dt({fontId:s.Z_,cssUrl:s.Z_,fontRegistrationData:i.d})),s.dt({fileUrl:s.Z_,fileName:s.Z_})},92260:(t,e,a)=>{a.d(e,{Jd:()=>l,Kn:()=>r});var s=a(32521);const i=s.dt({thumbnailUrl:s.G0([s.Z_,s.S1])}),n=s.dt({name:s.Z_,url:s.Z_,type:s.G0([s.i0("complete_site"),s.i0("sections"),s.i0("ui_kit"),s.S1]),isLocal:s.G0([s.O7,s.S1]),meta:s.G0([s.S1,i])}),l=s.dt({designProviders:s.IX(n),globalSettingsLastImportedFromUrl:s.G0([s.Z_,s.lB]),designPresetsLastImportedFromUrl:s.G0([s.Z_,s.lB]),fullSiteLastImportedFromUrl:s.G0([s.Z_,s.lB])}),o=s.dt({id:s.pk,name:s.Z_,url:s.Z_,tags:s.IX(s.Z_)}),r=(s.dt({enabled:s.O7,reliesOnGlobalSettings:s.G0([s.O7,s.S1]),reliesOnDesignPresets:s.G0([s.O7,s.S1]),name:s.Z_,requiresPassword:s.G0([s.O7,s.S1]),passwordValid:s.G0([s.O7,s.S1]),posts:s.IX(o)}),s.dt({url:s.Z_,id:s.pk}))},47902:(t,e,a)=>{a.d(e,{DU:()=>r,UN:()=>d,pG:()=>l});var s=a(32521),i=a(89754),n=a(78454);const l=s.jV([s.dt({category:s.Z_,slug:s.Z_,label:s.Z_,controls:s.IX(i.ur),returnTypes:s.IX(n._)}),s.r$({proOnly:s.O7,subcategory:s.Z_,defaultAttributes:s.G0([s.IM(s.Z_,s.Z_),s.IX(s.S1)])})]),o=(s.dt({fallback:s.Z_,beforeContent:s.Z_,afterContent:s.Z_}),s.IM(s.Z_,s.G0([s.Z_,s.pk,s.IM(s.Z_,s.Z_)]))),r=s.dt({shortcode:s.Z_,field:l,attributes:s.G0([o,s.IX(s.S1)])}),d=s.IX(l);s.r$({[typeof String]:s.Z_})},63842:(t,e,a)=>{a.d(e,{D:()=>_,My:()=>L,Ve:()=>V,_t:()=>G,ws:()=>I,xd:()=>$});var s=a(32521),i=a(89754),n=a(78454);const l=s.iG(s.dt({contentSections:s.IX(i.ur),designSections:s.IX(i.ur),settingsSections:s.IX(i.ur)})),o=s.dt({name:s.Z_,template:s.Z_}),r=s.dt({name:s.Z_,propertyPath:s.Z_}),d=s.dt({name:s.Z_,rawValue:s.Z_}),c=s.G0([o,r,d]),p=s.IX(c),u=s.dt({name:s.Z_,template:s.Z_}),m=s.IX(u),g=s._4,h=s.jV([s.dt({script:s.Z_}),s.r$({dependencies:s.IX(s.Z_),runForAllChildren:s.O7})]),_=(s.dt({actionData:h,elements:s.IX(s.Z_)}),s.r$({title:s.Z_,scripts:s.IX(s.Z_),inlineScripts:s.IX(s.Z_),styles:s.IX(s.Z_),inlineStyles:s.IX(s.Z_),builderCondition:s.Z_,frontendCondition:s.Z_,googleFonts:s.IX(s.Z_)})),v=s.IX(s.dt({name:s.Z_,url:s.Z_})),y=(s.dt({name:s.Z_,files:s.dt({js:v,css:v})}),s.r$({onPropertyChange:s.IX(h),onAfterDeletedElement:s.IX(h),onMovedElement:s.IX(h),onMountedElement:s.IX(h),onCreatedElement:s.IX(h),onBeforeDeletingElement:s.IX(h),onActivatedElement:s.IX(h)})),b=s.G0([s.i0("root"),s.i0("final"),s.i0("final-link"),s.i0("container"),s.i0("container-restricted"),s.i0("container-link"),s.i0("container-excluding-self"),s.i0("section"),s.i0("final-that-is-allowed-inside-root"),s.i0("popup")]),f=s.jV([s.dt({type:b}),s.r$({restrictedToBeADirectChildOf:s.IX(s.Z_),restrictedToBeADescendantOf:s.IX(s.Z_),notAllowedWhenNodeTypeIsPresentInTree:s.IX(s.Z_)})]),k=s.G0([s.i0("inside-top"),s.i0("inside-left"),s.i0("inside-right"),s.i0("inside-bottom"),s.i0("outside-top"),s.i0("outside-right"),s.i0("outside-left"),s.i0("outside-bottom")]),T=s.G0([s.i0("padding-top"),s.i0("padding-left"),s.i0("padding-right"),s.i0("padding-bottom"),s.i0("margin-top"),s.i0("margin-right"),s.i0("margin-left"),s.i0("margin-bottom")]),Z=s.G0([s.i0(!1),s.IX(s.Z_)]),w=s.dt({location:k,cssProperty:T,affectedPropertyPath:s.Z_}),C=s.sH("ChildElement",(()=>s.jV([s.dt({slug:s.Z_}),s.r$({defaultProperties:g,children:s.IX(C)})]))),I=s.G0([s.i0("WooCommerce"),s.i0("ACF"),s.i0("MetaBox"),s.i0("ACF"),s.i0("FacetWP"),s.i0("WP Grid Builder")]),S=s.G0([s.r$({dependsOnGlobalScripts:s.O7,bypassPointerEvents:s.O7,sharePropsWithSSRChildren:s.O7,requiredPlugins:s.IX(I),disableAI:s.O7,proOnly:s.O7}),s.i0(!1)]),P=s.G0([s.i0(!1),s.r$({alwaysHide:s.O7,allowedPostTypes:s.IX(s.Z_)})]),B=s.G0([s.i0("yes"),s.i0("no"),s.i0("unknown"),s.i0("sort of")]),x=s.r$({looksGood:B,optionsGood:B,optionsWork:B,dynamicBehaviorWorks:B,notes:s.Z_}),D=s.dt({backgroundColor:s.G0([s.Z_,s.lB]),textColor:s.G0([s.Z_,s.lB]),label:s.Z_}),G=s.iG(s.dt({name:s.Z_,className:s.G0([s.Z_,s.i0(!1)]),uiIcon:s.G0([s.Z_,s.i0(!1)]),slug:s.Z_,category:s.Z_,badge:s.G0([D,s.i0(!1)]),htmlTag:s.dt({default:s.Z_,options:s.IX(s.Z_),pathToControl:s.G0([s.i0(!1),s.Z_])}),template:s.Z_,additionalClasses:s.G0([m,s.i0(!1)]),attributes:s.G0([p,s.i0(!1)]),cssTemplate:s.Z_,defaultCss:s.Z_,defaultProperties:s.G0([g,s.i0(!1)]),defaultChildren:s.G0([s.IX(C),s.i0(!1)]),controls:l,dependencies:s.G0([s.IX(_),s.i0(!1)]),actions:s.G0([y,s.i0(!1)]),nestingRule:f,spacingBars:s.G0([s.i0(!1),s.IX(w)]),dynamicPropertyPaths:s.G0([s.i0(!1),s.IX(n.G)]),settings:S,addPanelRules:P,experimental:s.O7,order:s.pk,projectManagement:s.G0([s.i0(!1),x]),propertyPathsToWhitelistInFlatProps:Z,propertyPathsToSsrElementWhenValueChanges:Z})),A=(s.IX(G),s.dt({slug:s.Z_,label:s.Z_})),V=s.IX(A),$=s.r$({attributes:s.IX(c),dependencies:s.IX(_),actions:y}),L=s.IX(s.dt({macro:s.Z_,slug:s.Z_}))},47245:(t,e,a)=>{a.d(e,{Pt:()=>S});var s=a(32521),i=a(47902),n=a(63842),l=a(75031),o=a(32874),r=a(9294),d=a(94328),c=a(23777),p=a(21516),u=a(83714),m=a(38537),g=a(99697),h=a(3749),_=a(14018),v=a(97313),y=a(14010),b=a(665),f=a(92260),k=a(85256);const T=s.G0([s.i0("post_does_not_exist"),s.i0("post_type_is_banned"),s.i0("post_type_is_restricted"),s.i0("post_is_in_trash")]),Z=s.dt({errorType:T,postType:s.G0([s.S1,s.Z_]),backToAdminUrl:s.Z_}),w=["free","pro"],C=(0,k.$)(w),I=s.dt({enabled:s.O7}),S=s.G0([s.i0("local"),s.i0("production")]),P=s.dt({environment:S,elementPresets:_.p,neededData:u.i,builderElements:s.IX(n._t),elementsExternalAttrsDepsAndActions:n.xd,builderElementCategories:n.Ve,preferences:h.p,dynamicFields:i.UN,conditions:g.bn,fonts:o.s,globalSettingsControlsAndTemplate:r.D,globalSettings:l.az,plugins:d.m,availableDocuments:m.gu,selectors:p.Ho,availableMediaSizes:s.IX(b.wP),availablePermissions:s.IX(y.E),availableWordpressPlugins:s.IX(n.ws),permission:y.E,builtinBreakpoints:s.IX(v.g),twigMacros:n.My,twigMacrosHash:s.Z_,designLibrary:f.Jd,subscriptionMode:C,experiments:s.IX(s.Z_),ai:I}),B=s.jV([s.dt({document:m.fA,documentSpecificNeededUrls:u.s,templatePreview:c.jz}),P]);s.G0([Z,B])},21516:(t,e,a)=>{a.d(e,{Ho:()=>d});var s=a(75031),i=a(32521),n=a(89754);const l=i.Z_,o=i.dt({name:l,type:i.G0([i.i0("class"),i.i0("custom")]),properties:s.az}),r=i.IX(o),d=i.iG(i.dt({template:i.Z_,controls:i.IX(n.ur),selectors:r}))},23777:(t,e,a)=>{a.d(e,{jz:()=>o});var s=a(32521);const i=s.dt({field:s.Z_,index:s.pk}),n=s.dt({label:s.Z_,url:s.Z_,type:s.Z_,repeater:s.G0([i,s.lB,s.S1])}),l=s.IX(n),o=s.dt({previewableItems:s.G0([l,s.i0(!1)]),lastPreviewedItem:s.G0([n,s.i0(!1)])})}},e={};function a(s){var i=e[s];if(void 0!==i)return i.exports;var n=e[s]={id:s,loaded:!1,exports:{}};return t[s].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=t,(()=>{var t=[];a.O=(e,s,i,n)=>{if(!s){var l=1/0;for(c=0;c<t.length;c++){for(var[s,i,n]=t[c],o=!0,r=0;r<s.length;r++)(!1&n||l>=n)&&Object.keys(a.O).every((t=>a.O[t](s[r])))?s.splice(r--,1):(o=!1,n<l&&(l=n));if(o){t.splice(c--,1);var d=i();void 0!==d&&(e=d)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[s,i,n]}})(),(()=>{a.n=t=>{var e=t&&t.__esModule?()=>t["default"]:()=>t;return a.d(e,{a:e}),e}})(),(()=>{a.d=(t,e)=>{for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{a.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}})(),(()=>{a.nmd=t=>(t.paths=[],t.children||(t.children=[]),t)})(),(()=>{a.j=93})(),(()=>{var t={93:0};a.O.j=e=>0===t[e];var e=(e,s)=>{var i,n,[l,o,r]=s,d=0;if(l.some((e=>0!==t[e]))){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(r)var c=r(a)}for(e&&e(s);d<l.length;d++)n=l[d],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(c)},s=globalThis["webpackChunkbuilder"]=globalThis["webpackChunkbuilder"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var s=a.O(void 0,[998,64],(()=>a(85299)));s=a.O(s)})();
//# sourceMappingURL=manage-templates.f3eebe32.js.map