import{j as s,u as e}from"./fields-GHpMjljq.js";import{u as T,a as f,L as b}from"./vendor-BmsXziqF.js";import{P as m,u as j,aB as P,n as x,a as u,m as A,H as C,j as k,L as R,s as p,i as $,aA as E,A as L}from"./index-N_DirKM7.js";import{L as w}from"./Layout-6tbtb2_L.js";import{T as h}from"./index-CmFkX8j0.js";import{E as B}from"./index-CkilzTBU.js";import{B as N}from"./index-DFTQvoT1.js";import"./index-BwVKM9Kw.js";const y=({record:t,postType:r,defaultChecked:c})=>{const i=j(),d=l=>{i(P({postType:r,taxonomies:[l]})).then(n=>{const o=n.payload;o.success&&x.success(e("Custom post type was associated to selected taxonomies")),o.error&&x.error(error)}).catch(n=>console.error(n))};return s.jsxs("tr",{children:[s.jsx("td",{children:t.slug}),s.jsx("td",{children:s.jsx(B,{element:t})}),s.jsx("td",{children:t.singular}),s.jsx("td",{children:t.plural}),s.jsx("td",{children:s.jsxs("label",{"data-cy":`assoc-${t.slug}-to-${r}`,className:"checkbox",htmlFor:t.id,children:[s.jsx("input",{id:t.id,type:"checkbox",defaultChecked:c,onChange:l=>d({id:t.id,checked:l.target.checked})}),s.jsx("span",{})]})})]})};y.propTypes={postType:m.string.isRequired,record:m.object.isRequired,defaultChecked:m.bool.isRequired};const _=()=>{const t=document.globals;t.settings;const r=t.globals,c=j(),{data:i,loading:d}=u(a=>a.fetchTaxonomies),{data:l,loading:n}=u(a=>a.fetchCustomPostTypes),{postType:o}=T();if(f.useEffect(()=>{A(e(`${e("Associate taxonomies to")} ${o}`)),c(C()),c(k({postType:o}))},[]),d&&n)return s.jsx(R,{});const g=[s.jsx(N,{style:p.PRIMARY,to:"/register",children:e("Register new Post Type")})];return s.jsx(w,{title:`${e("Associate taxonomies to")} ${o}`,actions:g,crumbs:[{label:e("Registered Custom Post Types"),link:"/"},{label:o,link:`/view/${o}`},{label:`${e("Associate taxonomies to")} ${o}`}],children:l.length>0&&i.records&&i.records.length>0?s.jsx("div",{className:"responsive",children:s.jsxs("table",{className:`acpt-table with-shadow ${r.is_rtl?"rtl":""}`,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:s.jsx(h,{tip:e("Taxonomy slug. The post name/slug. Used for various queries for taxonomy content."),label:e("Slug")})}),s.jsx("th",{children:e("Type")}),s.jsx("th",{children:s.jsx(h,{tip:e("Singular label. Used when a singular label is needed"),label:e("Singular")})}),s.jsx("th",{children:s.jsx(h,{tip:e("Plural label. Used for the taxonomy admin menu item"),label:e("Plural")})}),s.jsx("th",{children:e("Associate")})]})}),s.jsx("tbody",{children:i.records&&i.records.map(a=>s.jsx(y,{record:a,postType:o,defaultChecked:!$(E(l[0].taxonomies,a.id))},a.id))})]})}):s.jsxs(L,{style:p.SECONDARY,children:[e("No taxonomies found.")," ",s.jsx(b,{to:"/register_taxonomy",children:e("Register the first one")}),"!"]})})};export{_ as default};
