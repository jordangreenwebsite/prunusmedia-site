import{j as e,u as s,c as p}from"./fields-GHpMjljq.js";import{a as x,R as v}from"./vendor-BmsXziqF.js";import{M as f,L as g,V as y}from"./Layout-6tbtb2_L.js";import{P as m,B as d,s as u,w as L,n as j,r as C,u as D,a as M,m as _,c as R,a9 as E,L as N}from"./index-N_DirKM7.js";import{C as S,a as o}from"./CardRow-DOKtuUiB.js";const b=({license:t})=>{const[i,l]=x.useState(!1),[n,c]=x.useState(!1),h=()=>{c(!0),L("deactivateLicenseAction",{}).then(a=>{j.success(s("License successfully deactivated. The browser will refresh after 5 seconds.")),C(5e3)}).catch(a=>{c(!1),j.error(a)})},r=[e.jsx(d,{disabled:n,style:u.SUCCESS,onClick:a=>{a.preventDefault(),h(),l(!i)},children:s("Yes")}),e.jsx(d,{style:u.DANGER,onClick:a=>{a.preventDefault(),l(!i)},children:s("No")})];return t.code?e.jsxs(v.Fragment,{children:[e.jsx(f,{textAlign:"left",title:s("Confirm deactivating license"),visible:i,buttons:r,children:e.jsxs("div",{className:"flex-column s-8",children:[e.jsxs("div",{children:[s("Confirm deactivating license")," ",t.code,"."]}),e.jsx("div",{children:s("Are you sure?")})]})}),e.jsx(d,{onClick:a=>{a.preventDefault(),l(!i)},style:u.DANGER,children:s("Deactivate")})]}):null};b.propTypes={license:m.object.isRequired};const A=({license:t})=>{const l=document.globals.globals,[n,c]=x.useState(!1),h=[e.jsx(d,{style:u.DANGER,onClick:r=>{r.preventDefault(),c(!n)},children:s("Close")})];return t.licenseActivation?e.jsxs(v.Fragment,{children:[e.jsx(f,{textAlign:"left",title:p(s("details")),visible:n,buttons:h,children:e.jsx("div",{className:"responsive",children:e.jsx("table",{className:`acpt-table spaceless ${l.is_rtl?"rtl":""}`,children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"activation_id"}),e.jsx("td",{children:t.licenseActivation&&t.licenseActivation.activation_id})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"site_name"}),e.jsx("td",{children:t.licenseActivation&&t.licenseActivation.site_name})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"site_url"}),e.jsx("td",{children:t.licenseActivation&&t.licenseActivation.site_url})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"user_id"}),e.jsx("td",{children:t.licenseActivation&&t.licenseActivation.user_id})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"ip"}),e.jsx("td",{children:t.licenseActivation&&t.licenseActivation.ip})]})]})})})}),e.jsx("a",{href:"#",onClick:r=>{r.preventDefault(),c(!n)},children:s("Show")})]}):null};A.propTypes={license:m.object.isRequired};const k=()=>{const t=D(),{license:i,loading:l}=M(c=>c.fetchLicense);x.useEffect(()=>{_(s("Manage your license")),R("#/license"),t(E())},[]);let n=[];return i&&i.licenseActivation&&n.push(e.jsx(b,{license:i})),l?e.jsx(N,{}):e.jsx(g,{title:s("Manage your license"),actions:n,crumbs:[{label:s("My license")}],children:e.jsxs(S,{title:s("Manage your registered license key"),children:[e.jsx(o,{label:s("Plugin version"),value:e.jsx("div",{className:"i-flex-center s-8",children:e.jsx(y,{})})}),e.jsx(o,{label:s("License"),value:e.jsx("code",{"data-cy":"license-code",children:i.code})}),e.jsx(o,{label:s("Expiration date"),value:i.expiring_date?i.expiring_date:s("Lifetime")}),e.jsx(o,{label:p(s("details")),value:e.jsx(A,{license:i})})]})})};k.propTypes={};export{k as default};
