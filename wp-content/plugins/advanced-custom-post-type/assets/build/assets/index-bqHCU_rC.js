import{j as e,u as t}from"./fields-GHpMjljq.js";import{a as g,R as P,L as j,u as L}from"./vendor-BmsXziqF.js";import{M as T,L as F,s as B}from"./Layout-6tbtb2_L.js";import{P as p,u as v,B as y,s as f,bo as I,n as x,bl as k,a as $,b as w,m as M,L as V,A as _,w as q}from"./index-N_DirKM7.js";import{B as Y}from"./index-DFTQvoT1.js";import{P as O}from"./index-Dohps0ay.js";import{w as U}from"./woocommerce_icons-DRk2BEV-.js";import{B as z}from"./index-CN4BHzmU.js";import{W as G}from"./index-BJA9CeUw.js";import{u as D,a as R,b as H,F as J}from"./index.esm-Cy9FKwRd.js";import{u as K}from"./index-CrI7X7RI.js";const A=({id:s,page:a,perPage:d})=>{const n=v(),[o,u]=g.useState(!1),h=()=>{n(I(s)).then(m=>{const r=m.payload;r.success?(u(!o),x.success(t("WooCommerce product data successfully deleted")),n(k({page:a||1,perPage:d}))):x.error(r.error)}).catch(m=>{x.error(m)})},l=[e.jsx(y,{style:f.DANGER,onClick:()=>{h()},children:t("Yes, delete it")}),e.jsx(y,{style:f.SECONDARY,onClick:()=>{u(!o)},children:t("Return back to list")})];return e.jsxs(P.Fragment,{children:[e.jsx(T,{title:t("Delete WooCommerce product data"),buttons:l,visible:o,children:e.jsx("div",{children:t("You are going to delete WooCommerce this product data. Are you sure?")})}),e.jsx("a",{href:"#",onClick:m=>{m.preventDefault(),u(!o)},children:t("Delete")})]})};A.propTypes={id:p.string.isRequired,page:p.number.isRequired,perPage:p.number.isRequired};const W=g.memo(({record:s,page:a,perPage:d})=>{const{register:n}=D(),o=`elements.${s.id}`;return e.jsx(P.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{style:{width:"24px"},children:e.jsxs("label",{className:"checkbox",htmlFor:o,children:[e.jsx("input",{type:"checkbox",id:o,name:o,defaultChecked:!1,...n(o)}),e.jsx("span",{})]})}),e.jsx("td",{children:e.jsx("span",{className:`wcicon-${typeof s.icon=="object"?s.icon.icon:U[s.icon]}`,style:{color:"#777",fontSize:"18px"}})}),e.jsx("td",{children:s.name}),e.jsx("td",{children:e.jsx(z,{status:s.showInUI})}),e.jsx("td",{children:e.jsx(G,{visibility:s.visibility})}),e.jsx("td",{children:s.fields.length>0?e.jsx(j,{to:`/product-data/product/fields/${s.id}`,children:t("Manage")}):e.jsx(j,{to:`/product-data/product/fields/${s.id}`,children:t("Create")})}),e.jsx("td",{children:e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx(j,{to:`/product-data/product/view/${s.id}`,children:t("View")}),e.jsx(j,{to:`/product-data/product/edit/${s.id}`,children:t("Edit")}),e.jsx(A,{id:s.id,page:a,perPage:d})]})})]})})});W.propTypes={page:p.number,perPage:p.number,record:p.object.isRequired};const Q=()=>{const{control:s,register:a}=D(),d=R({control:s,name:"elements"}),n=()=>{let o=0;for(const[u,h]of Object.entries(d))h===!0&&o++;return o};return e.jsxs("div",{className:"flex-between s-8 mb-24",children:[e.jsxs("span",{children:[n()," ",t("Selected items")]}),e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsxs("select",{name:"action",className:"form-control sm",...a("action"),children:[e.jsx("option",{value:"",children:t("Select")}),e.jsx("option",{value:"delete",children:t("Delete")})]}),e.jsx(y,{style:f.WHITE,size:"sm",children:t("Execute")})]})]})},ie=({})=>{const s=document.globals,a=s.settings,[d]=K(),n=g.useRef(),o=H({mode:"all"}),u=R({control:o.control,name:"elements"}),h=v(),{data:l,loading:m}=$(c=>c.fetchWooCommerceProductData),{page:r}=L(),b=a.length>0&&w(a,"key","records_per_page")!==""?w(a,"key","records_per_page").value:20,C=Math.ceil(l.count/b);g.useEffect(()=>{M(t("WooCommerce product data")),h(k({page:r||1,perPage:b}))},[r]);const N=[e.jsx(Y,{to:"/product-data/product/add",style:f.PRIMARY,children:t("Add product data")})],E=()=>{if(!u)return!1;for(const[c,i]of Object.entries(u))if(i===!0)return!0;return!1},S=c=>{o.reset(),c.belongsTo="woo_product_data",q("bulkActionsAction",c).then(i=>{if(i.success===!0)switch(c.action){case"delete":x.success(t("WooCommerce product data successfully deleted")),o.resetField("elements"),B(),h(k({page:r||1,perPage:b}));break}else x.error(i.error)}).catch(i=>{console.error(i),x.error(t("Unknown error, please retry later"))})};return m?e.jsx(V,{}):e.jsx(J,{...o,children:e.jsx("form",{onSubmit:o.handleSubmit(S),children:e.jsxs(F,{title:t("WooCommerce product data"),actions:N,crumbs:[{label:t("Registered Custom Post Types"),link:"/"},{label:t("WooCommerce product data")}],children:[e.jsx("div",{ref:d,children:E()&&e.jsx(Q,{})}),l.records&&l.records.length>0?e.jsx("div",{className:"responsive",children:e.jsxs("table",{className:`acpt-table with-shadow ${s.is_rtl?"rtl":""}`,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"24px"},children:e.jsxs("label",{className:"checkbox",htmlFor:"all",children:[e.jsx("input",{ref:n,type:"checkbox",id:"all",defaultChecked:!1,onClick:c=>{l.records.map(i=>{o.setValue(`elements.${i.id}`,c.currentTarget.checked)})}}),e.jsx("span",{})]})}),e.jsx("th",{}),e.jsx("th",{children:t("Name")}),e.jsx("th",{children:t("Show on UI")}),e.jsx("th",{children:t("Visibility")}),e.jsx("th",{children:t("Fields")}),e.jsx("th",{children:t("Actions")})]})}),e.jsx("tbody",{children:l.records&&l.records.map(c=>e.jsx(W,{record:c,page:r||1,perPage:b},c.id))}),C>1&&e.jsx("tfoot",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:7,children:e.jsx(O,{currentPage:r?parseInt(r):1,totalPages:C,baseLink:"/product-data/product"})})})})]})}):e.jsxs(_,{style:f.SECONDARY,children:[t("No product data found.")," ",e.jsx(j,{to:"/product-data/product/add",children:t("Register the first one")}),"!"]})]})})})};export{ie as default};
